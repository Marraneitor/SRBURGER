<!DOCTYPE html>
<html lang="es" class="scroll-smooth sr-dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=3.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover, shrink-to-fit=no">
    <title>SR & SRA BURGER - 춰Hechas con Pasi칩n!</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>游꼢</text></svg>">
    <script>
        // Enable class-based dark mode for Tailwind CDN
        window.tailwind = window.tailwind || {};
        window.tailwind.config = Object.assign({}, window.tailwind.config, { darkMode: 'class' });
        // Apply initial theme ASAP to avoid flash
        (function () {
            const key = 'sr_theme';
            const stored = localStorage.getItem(key);
            // Por defecto usar siempre oscuro si no hay preferencia guardada
            const useDark = stored ? stored === 'dark' : true;
            document.documentElement.classList.toggle('dark', useDark);
        })();
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&family=Poppins:wght@600;700;800;900&display=swap" rel="stylesheet">
    <!-- Nota: en pedido-manual usamos modo r치pido (sin fotos) -->
    <link rel="stylesheet" href="styles/sr-ui.css">
    <script src="js/sr-shell.js" defer></script>
    <script>
        // Theme toggle (light/dark) - bind after DOM exists
        window.addEventListener('DOMContentLoaded', () => {
            const key = 'sr_theme';
            const btn = document.getElementById('theme-toggle');
            if (!btn) return;
            btn.addEventListener('click', () => {
                const isDark = document.documentElement.classList.contains('dark');
                const next = isDark ? 'light' : 'dark';
                document.documentElement.classList.toggle('dark', next === 'dark');
                localStorage.setItem(key, next);
            });
        });
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- Estilos personalizados -->
    <style>
        :root {
            --primary-gold: #16A34A;
            --primary-gold-dark: #15803D;
            --primary-red: #0B1220;
            --text-primary: #0F172A;
            --text-secondary: #64748B;
            --bg-light: #FFFFFF;
            --bg-section: #F8F9FA;
            --border-light: #E2E8F0;
            --shadow-soft: 0 10px 30px rgba(15, 23, 42, 0.08);
            --shadow-hover: 0 18px 45px rgba(15, 23, 42, 0.14);
            --border-radius: 24px;
            --transition: all 220ms cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        /* Dark mode (class-based) */
        html.dark body {
            background: linear-gradient(135deg, #0B1220 0%, #0F172A 100%);
            color: #E5E7EB;
        }
        html.dark #menu {
            background: linear-gradient(to bottom, #0B1220, #0F172A) !important;
        }
        html.dark .glass-effect {
            background: rgba(2, 6, 23, 0.78);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        html.dark .btn-primary {
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
        }
        /* Make common Tailwind grays readable in dark mode (scoped to main areas) */
        html.dark #inicio .text-gray-900,
        html.dark #menu .text-gray-900,
        html.dark #nosotros .text-gray-900,
        html.dark #faq .text-gray-900 {
            color: #F9FAFB !important;
        }
        html.dark #inicio .text-gray-800,
        html.dark #menu .text-gray-800,
        html.dark #nosotros .text-gray-800,
        html.dark #faq .text-gray-800 {
            color: #F3F4F6 !important;
        }
        html.dark #inicio .text-gray-700,
        html.dark #menu .text-gray-700,
        html.dark #nosotros .text-gray-700,
        html.dark #faq .text-gray-700 {
            color: #E5E7EB !important;
        }
        html.dark #inicio .text-gray-600,
        html.dark #menu .text-gray-600,
        html.dark #nosotros .text-gray-600,
        html.dark #faq .text-gray-600 {
            color: #CBD5E1 !important;
        }
        html.dark #inicio .bg-white,
        html.dark #menu .bg-white,
        html.dark #nosotros .bg-white,
        html.dark #faq .bg-white {
            background-color: rgba(15, 23, 42, 0.96) !important;
        }

        * {
            scroll-behavior: smooth;
            box-sizing: border-box;
        }

        html {
            overflow-x: hidden;
            width: 100%;
            max-width: 100vw;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #F8F9FA 0%, #FFFFFF 100%);
            color: var(--text-primary);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow-x: hidden;
            width: 100%;
            max-width: 100vw;
            margin: 0;
            padding: 0;
        }

        /* Prevenir desbordamiento horizontal en todos los contenedores */
        .container, section, div {
            max-width: 100%;
        }

        /* Asegurar que las im치genes no desborden */
        img {
            max-width: 100%;
            height: auto;
        }

        .font-poppins {
            font-family: 'Poppins', sans-serif;
        }

        .hero-bg {
            /* Hero image is now an <img> with fetchpriority=high */
            background: linear-gradient(135deg, rgba(218, 41, 28, 0.4) 0%, rgba(255, 199, 44, 0.3) 100%);
        }

        .menu-item-img {
            aspect-ratio: 1 / 1;
            object-fit: cover;
            border-radius: var(--border-radius);
            transition: var(--transition);
        }

        .menu-item-img:hover {
            transform: scale(1.05);
        }

        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-gold) 0%, var(--primary-gold-dark) 100%);
            color: var(--text-primary);
            border: none;
            padding: 16px 32px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 16px;
            transition: var(--transition);
            box-shadow: var(--shadow-soft);
            position: relative;
            overflow: hidden;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: var(--transition);
        }

        .btn-primary:hover::before {
            left: 100%;
        }

        .card-modern {
            background: var(--bg-light);
            border-radius: var(--border-radius);
            padding: 24px;
            box-shadow: var(--shadow-soft);
            border: 1px solid var(--border-light);
            transition: var(--transition);
        }

        .card-modern:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-hover);
        }

        /* Animaciones adicionales */
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .float-animation {
            animation: float 3s ease-in-out infinite;
        }

        /* Efectos de texto gradiente */
        .text-gradient {
            background: linear-gradient(135deg, var(--primary-gold) 0%, var(--primary-gold-dark) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Efecto de brillo en hover para botones */
        .btn-shimmer {
            position: relative;
            overflow: hidden;
        }

        .btn-shimmer::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: left 0.6s;
        }

        .btn-shimmer:hover::after {
            left: 100%;
        }

        /* Mejoras para dispositivos m칩viles */
        @media (max-width: 768px) {
            .hero-bg h1 {
                font-size: 3rem;
                line-height: 1.1;
            }
            
            .btn-primary {
                padding: 14px 28px;
                font-size: 15px;
            }
        }

        /* Scrollbar personalizado */
        ::-webkit-scrollbar {
            width: 12px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 6px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, var(--primary-gold) 0%, var(--primary-gold-dark) 100%);
            border-radius: 6px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, var(--primary-gold-dark) 0%, var(--primary-red) 100%);
        }
        
        /* Advanced animations and micro-interactions */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
        
        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        .animate-fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        
        .animate-scale-in {
            animation: scaleIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        @keyframes wiggle {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-3deg); }
            75% { transform: rotate(3deg); }
        }
        
        .animate-fade-in-up {
            animation: fadeInUp 0.6s ease-out forwards;
        }
        
        .animate-slide-in-left {
            animation: slideInLeft 0.6s ease-out forwards;
        }
        
        .animate-scale-in {
            animation: scaleIn 0.4s ease-out forwards;
        }
        
        .animate-wiggle {
            animation: wiggle 0.5s ease-in-out;
        }
        
        /* Enhanced hover effects */
        .hover-lift {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .hover-lift:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }
        
        /* Gradient text effects */
        .text-gradient-gold {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .text-gradient-fire {
            background: linear-gradient(135deg, #FF4500, #FF6347, #FFD700);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        /* Loading skeleton effects */
        @keyframes skeleton-loading {
            0% { background-position: -200px 0; }
            100% { background-position: calc(200px + 100%) 0; }
        }
        
        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200px 100%;
            animation: skeleton-loading 1.5s infinite;
        }
        
        /* Pulse effects for CTAs */
        .pulse-glow {
            animation: pulse-glow 2s infinite;
        }
        
        @keyframes pulse-glow {
            0% { box-shadow: 0 0 0 0 rgba(255, 199, 44, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(255, 199, 44, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 199, 44, 0); }
        }
        
        /* Enhanced Mobile-first responsive improvements */
        @media (max-width: 640px) {
            /* Base font size adjustment */
            html {
                font-size: 14px; /* Reduce base font size on mobile */
            }

            /* Prevent horizontal scroll */
            body {
                overflow-x: hidden !important;
                max-width: 100vw !important;
            }

            /* Hero section mobile optimization */
            .hero-bg {
                min-height: 60vh;
                background-attachment: scroll; /* Better performance on mobile */
                padding: 1rem;
            }
            
            .hero-bg h1 {
                font-size: 1.75rem !important;
                line-height: 1.2;
                margin-bottom: 0.75rem;
            }
            
            .hero-bg p {
                font-size: 0.875rem !important;
                margin-bottom: 1.5rem;
            }
            
            /* Header improvements */
            .header-mobile {
                padding: 0.5rem 0.75rem;
            }
            
            /* Button improvements - tama침os m치s apropiados */
            .btn-primary {
                padding: 12px 20px !important;
                font-size: 14px !important;
                min-height: 44px;
                border-radius: 10px;
            }

            /* Contenedores con padding apropiado */
            .container {
                padding-left: 1rem !important;
                padding-right: 1rem !important;
            }

            section {
                padding: 2rem 0.75rem !important;
            }
            
            .card-modern {
                padding: 10px;
                margin-bottom: 0.75rem;
            }
            
            /* Mobile menu grid - 2 columnas (3 columnas en >=480px) */
            .menu-grid-mobile {
                display: grid;
                grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
                gap: 0.5rem !important;
                padding: 0 0.5rem;
                max-width: 100%;
            }
            @media (min-width: 480px) and (max-width: 640px) {
                .menu-grid-mobile {
                    grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
                }
            }
            
            /* Menu card mobile optimization */
            .menu-card {
                margin-bottom: 0.75rem;
                border-radius: 12px;
                overflow: hidden;
                max-width: 100%;
            }
            
            .menu-card-mobile {
                display: flex;
                flex-direction: column;
                height: auto;
                min-height: unset;
            }
            
            .menu-card-image-mobile {
                width: 100%;
                aspect-ratio: 1 / 1;
                height: auto;
                flex-shrink: 0;
            }
            
            .menu-card-content-mobile {
                padding: 6px;
                display: flex;
                flex-direction: column;
                gap: 3px;
            }
            
            .menu-card h4 {
                font-size: 0.875rem !important;
                line-height: 1.2;
                margin-bottom: 0.25rem;
                font-weight: 700;
            }
            
            .menu-card .description {
                font-size: 0.7rem !important;
                line-height: 1.2;
                margin-bottom: 0.25rem;
                display: -webkit-box;
                -webkit-line-clamp: 2;
                line-clamp: 2;
                -webkit-box-orient: vertical;
                overflow: hidden;
            }
            
            .menu-card .price {
                font-size: 1rem !important;
                font-weight: 800;
                margin-bottom: 0.5rem;
            }
            
            /* Enhanced button visibility on mobile - MEJORADO */
            .add-to-cart-btn, .customize-btn, .choose-combo-btn {
                font-size: 13px !important;
                padding: 10px 14px !important;
                font-weight: 700 !important;
                border-radius: 8px !important;
                min-height: 44px !important;
                width: 100% !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                gap: 6px !important;
                transition: all 0.15s ease !important;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15) !important;
                cursor: pointer !important;
                touch-action: manipulation !important;
            }

            /* Pedido manual (tarjetas r치pidas): el bot칩n NO debe ocupar todo el ancho */
            body.sr-manual-fast .sr-fast-card .add-to-cart-btn,
            body.sr-manual-fast .sr-fast-card .customize-btn,
            body.sr-manual-fast .sr-fast-card .choose-combo-btn {
                width: 48px !important;
                min-height: 48px !important;
                height: 48px !important;
                padding: 0 !important;
                border-radius: 12px !important;
                box-shadow: none !important;
            }

            /* POS: no forzar width 100% dentro del card */
            body.sr-manual-fast .sr-pos-card .add-to-cart-btn,
            body.sr-manual-fast .sr-pos-card .customize-btn,
            body.sr-manual-fast .sr-pos-card .choose-combo-btn {
                width: auto !important;
                min-height: unset !important;
                padding: 0 !important;
                box-shadow: none !important;
            }
            
            .touch-device .add-to-cart-btn:active, 
            .touch-device .customize-btn:active, 
            .touch-device .choose-combo-btn:active {
                opacity: 0.8 !important;
                transform: scale(0.97) !important;
                box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2) !important;
            }
            
            /* Badges inline para m칩viles - responsivos */
            .menu-card-mobile .inline-block {
                font-size: 0.65rem !important;
                padding: 0.2rem 0.4rem !important;
                margin: 0.1rem 0.2rem 0.1rem 0 !important;
                border-radius: 0.5rem !important;
                white-space: nowrap;
                box-shadow: 0 1px 3px rgba(0,0,0,0.2);
            }
            
            /* Cart button mobile - MEJORADO */
            .cart-btn-mobile {
                position: fixed;
                bottom: 24px;
                right: 24px;
                z-index: 1000;
                width: 64px;
                height: 64px;
                border-radius: 50%;
                box-shadow: 0 6px 24px rgba(0,0,0,0.35);
                touch-action: manipulation;
                transition: all 0.15s ease;
                cursor: pointer;
            }
            
            .touch-device .cart-btn-mobile:active {
                opacity: 0.85;
                transform: scale(0.95);
                box-shadow: 0 3px 12px rgba(0,0,0,0.4);
            }
            
            /* Category headers mobile */
            .category-header-mobile h3 {
                font-size: 1.25rem !important;
                margin-bottom: 0.5rem;
            }
            
            .category-header-mobile p {
                font-size: 0.8rem !important;
                margin-bottom: 0.75rem;
            }

            /* Ajuste general de t칤tulos en m칩vil */
            h1 {
                font-size: 1.75rem !important;
            }

            h2 {
                font-size: 1.5rem !important;
            }

            h3 {
                font-size: 1.25rem !important;
            }

            h4 {
                font-size: 1rem !important;
            }

            h5, h6 {
                font-size: 0.875rem !important;
            }
            
            /* Container padding mobile */
            .container-mobile {
                padding-left: 0.75rem;
                padding-right: 0.75rem;
            }
            
            /* Touch-friendly interactions - MEJORADO */
            button, input[type="button"], input[type="submit"], .btn, a[role="button"] {
                min-height: 44px !important;
                min-width: 44px;
                -webkit-tap-highlight-color: rgba(255, 199, 44, 0.2);
                touch-action: manipulation;
                cursor: pointer;
                user-select: none;
                -webkit-user-select: none;
            }
            
            /* Feedback visual al tocar - SOLO CON CSS */
            .touch-device button:active, 
            .touch-device .btn:active, 
            .touch-device [onclick]:active,
            .touch-device a[role="button"]:active {
                opacity: 0.7 !important;
                transform: scale(0.98) !important;
                transition: all 0.1s ease !important;
            }
            
            /* Espaciado entre botones t치ctiles */
            .mobile-button-group button {
                margin: 8px 0;
            }
            
            /* Sticky header on mobile */
            .sticky-header-mobile {
                position: sticky;
                top: 0;
                z-index: 50;
                background: rgba(255, 255, 255, 0.95);
                backdrop-filter: blur(10px);
                border-bottom: 1px solid rgba(0,0,0,0.1);
                padding: 0.75rem 1rem;
            }
            
            /* Mobile modal improvements */
            .modal-mobile {
                margin: 0;
                max-height: 100vh;
                border-radius: 16px 16px 0 0;
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                transform: translateY(100%);
                transition: transform 0.3s ease-out;
            }
            
            .modal-mobile.show {
                transform: translateY(0);
            }
        }
        
        @media (max-width: 768px) {
            /* Tablet responsive */
            .hero-bg h1 {
                font-size: 3rem;
            }
            
            .menu-grid {
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
                gap: 1.5rem;
            }
            
            .card-modern {
                padding: 20px;
            }
        }
        
        @media (max-width: 1024px) {
            /* Desktop responsive */
            .container {
                padding-left: 1.5rem;
                padding-right: 1.5rem;
            }
            
            .menu-grid {
                grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
                gap: 2rem;
            }
        }
        
        /* Enhanced Loading states with better visibility */
        .loading {
            position: relative;
            overflow: hidden;
            background: linear-gradient(135deg, #10b981, #059669) !important;
            color: white !important;
        }
        
        .loading::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.6), transparent);
            animation: loading-sweep 1s infinite;
            z-index: 1;
        }
        
        .loading * {
            position: relative;
            z-index: 2;
        }
        
        @keyframes loading-sweep {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        /* Success state for buttons */
        .success-state {
            background: linear-gradient(135deg, #10b981, #059669) !important;
            color: white !important;
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.4) !important;
        }
        
        /* Enhanced button animations */
        .btn-bounce {
            animation: btn-bounce 0.6s ease-out;
        }
        
        @keyframes btn-bounce {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        /* Better spinner animation */
        .loading-spinner {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 0.8s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Enhanced notification system */
        .notification-enter {
            animation: notification-slide-in 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        @keyframes notification-slide-in {
            0% {
                transform: translateX(100%);
                opacity: 0;
            }
            100% {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* === Carrusel horizontal de productos === */
        .menu-grid-horizontal {
            display: flex;
            gap: 1.5rem;
            overflow-x: auto;
            scroll-snap-type: x mandatory;
            scroll-behavior: smooth;
            padding-bottom: 1rem;
            -webkit-overflow-scrolling: touch;
        }

        .menu-grid-horizontal::-webkit-scrollbar {
            display: none;
        }

        .menu-grid-horizontal {
            scrollbar-width: none; /* Firefox */
        }

        .menu-grid-horizontal .menu-card,
        .menu-grid-horizontal .menu-card-mobile {
            scroll-snap-align: start;
            flex: 0 0 min(320px, 85vw);
        }

        /* Pedido manual: cards m치s grandes para leer nombres completos */
        body.sr-manual-fast .menu-grid-horizontal .menu-card-mobile {
            flex: 0 0 min(420px, 92vw);
        }

        /* === POS (pedido manual): grid uniforme y sim칠trico === */
        body.sr-manual-fast .menu-grid-pos {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 12px;
            padding: 0.75rem;
        }
        @media (min-width: 640px) {
            body.sr-manual-fast .menu-grid-pos {
                grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
                gap: 14px;
            }
        }

        body.sr-manual-fast .sr-pos-card {
            position: relative;
            background: #0B1220;
            border: 1px solid rgba(255, 255, 255, 0.10);
            border-radius: 16px;
            padding: 12px;
            height: 150px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            text-align: center;
            box-shadow: 0 10px 24px rgba(0,0,0,0.25);
        }

        body.sr-manual-fast .sr-pos-name {
            width: 100%;
            color: #F8FAFC;
            font-weight: 800;
            font-size: 0.92rem;
            line-height: 1.12;
            min-height: 2.4em; /* fija altura visual para alinear precios */
            display: -webkit-box;
            -webkit-line-clamp: 2;
            line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
            hyphens: auto;
            overflow-wrap: anywhere;
            padding: 2px 2px 0;
        }

        body.sr-manual-fast .sr-pos-price {
            position: absolute;
            left: 12px;
            bottom: 12px;
            color: #34D399;
            font-weight: 900;
            font-size: 1.05rem;
            letter-spacing: 0.2px;
        }

        body.sr-manual-fast .sr-pos-action {
            position: absolute;
            right: 12px;
            bottom: 12px;
            width: 44px;
            height: 44px;
            border-radius: 12px;
            background: #10B981;
            color: #FFFFFF;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 20px rgba(16,185,129,0.25);
            border: 0;
        }
        body.sr-manual-fast .sr-pos-action:active {
            transform: scale(0.97);
        }
        body.sr-manual-fast .sr-pos-action i {
            pointer-events: none;
            font-size: 16px;
        }

        @media (min-width: 1024px) {
            .menu-grid-horizontal .menu-card,
            .menu-grid-horizontal .menu-card-mobile {
                flex: 0 0 30%;
            }

            body.sr-manual-fast .menu-grid-horizontal .menu-card-mobile {
                flex: 0 0 42%;
            }
        }

        .category-carousel-shell {
            position: relative;
        }

        .category-arrow-desktop {
            width: 3rem;
            height: 3rem;
            border-radius: 9999px;
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            box-shadow: 0 10px 25px rgba(15, 23, 42, 0.35);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #111827;
            transition: opacity 0.2s ease, transform 0.2s ease;
            opacity: 0;
            pointer-events: auto;
        }

        .category-arrow-left {
            margin-left: 0.5rem;
        }

        .category-arrow-right {
            margin-right: 0.5rem;
        }

        .category-carousel-shell:hover .category-arrow-desktop {
            opacity: 1;
        }

        @media (max-width: 640px) {
            .category-arrow-desktop {
                display: none;
            }
        }
        
        /* Enhanced focus states for accessibility */
        button:focus,
        input:focus,
        select:focus,
        textarea:focus {
            outline: 2px solid var(--primary-gold);
            outline-offset: 2px;
        }
        
        /* MEJORAS ADICIONALES PARA M칍VIL */
        @media (max-width: 640px) {
            /* Todos los botones principales con tama침o apropiado */
            .btn-primary {
                min-height: 48px !important;
                padding: 12px 20px !important;
                font-size: 15px !important;
                position: relative !important;
                z-index: 10 !important;
            }
            
            /* Asegurar que los botones sean clickeables */
            button, .btn, [onclick] {
                pointer-events: auto !important;
                position: relative !important;
            }
            
            /* Inputs apropiados para m칩vil */
            input[type="text"],
            input[type="email"],
            input[type="tel"],
            textarea,
            select {
                min-height: 44px !important;
                font-size: 16px !important;
                padding: 10px 14px !important;
                border-radius: 8px !important;
            }
            
            /* Mejorar spacing en tarjetas del men칰 */
            .menu-card {
                margin-bottom: 1rem !important;
                position: relative !important;
            }
            
            /* Asegurar que los botones en las cards sean clickeables */
            .menu-card button {
                position: relative !important;
                z-index: 5 !important;
            }
            
            /* Botones de cantidad apropiados */
            button[onclick*="changeQuantity"] {
                min-width: 40px !important;
                min-height: 40px !important;
                font-size: 18px !important;
                font-weight: bold !important;
                z-index: 10 !important;
            }
            
            /* Modal de checkout m치s accesible */
            .modal-content {
                max-height: 85vh !important;
                overflow-y: auto !important;
            }
            
            /* Padding del body para evitar elementos pegados */
            body {
                padding-bottom: 80px;
            }
            
            /* Mejorar 치rea t치ctil de links */
            a {
                padding: 4px 8px;
                margin: -4px -8px;
            }
            
            /* Iconos apropiados en m칩vil */
            .fa, .fas, .far {
                font-size: 1em;
            }
            
            /* Prevenir que overlays bloqueen clicks */
            .menu-card::before,
            .card-modern::before {
                pointer-events: none !important;
            }
            
            /* Bot칩n de confirmar ubicaci칩n - T츼CTIL */
            #hero-confirm-location {
                min-height: 50px !important;
                font-size: 15px !important;
                font-weight: 700 !important;
                touch-action: manipulation !important;
                -webkit-tap-highlight-color: rgba(34, 197, 94, 0.3) !important;
                position: relative !important;
                z-index: 100 !important;
            }
            
            .touch-device #hero-confirm-location:active {
                opacity: 0.85 !important;
                transform: scale(0.97) !important;
            }
        }

        /* Media query para pantallas muy peque침as (320px - 374px) */
        @media (max-width: 374px) {
            html {
                font-size: 13px !important;
            }

            .hero-bg h1 {
                font-size: 1.5rem !important;
            }

            .menu-card h4 {
                font-size: 0.8rem !important;
            }

            .menu-card .description {
                font-size: 0.65rem !important;
            }

            .menu-card .price {
                font-size: 0.9rem !important;
            }

            .add-to-cart-btn, .customize-btn, .choose-combo-btn {
                font-size: 12px !important;
                padding: 8px 12px !important;
                min-height: 40px !important;
            }
        }
        
        /* Prevenir zoom en inputs en iOS */
        @supports (-webkit-touch-callout: none) {
            input[type="text"],
            input[type="email"],
            input[type="tel"],
            textarea,
            select {
                font-size: 16px !important;
            }
        }
        
        /* Smooth scroll mejorado */
        html {
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch;
        }
        
        /* Optimizar rendimiento en m칩vil - SOLO ELEMENTOS ANIMADOS */
        .animate-fade-in,
        .animate-scale-in,
        .menu-card-image-mobile,
        .modal-content {
        
        /* ===== Premium Menu (CSS-only upgrade) ===== */
        /* 1) Bento grid on desktop while keeping existing markup */
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
        }
        
        /* Dark mode support (optional) */
        @media (prefers-color-scheme: dark) {
            :root {
                --text-primary: #f9fafb;
                --text-secondary: #d1d5db;
                --bg-light: #1f2937;
                --bg-section: #111827;
            }
        }
        
        /* Smooth scroll behavior */
        html {
            scroll-behavior: smooth;
        }
        
        /* Line clamp utility */
        .line-clamp-3 {
            display: -webkit-box;
            -webkit-line-clamp: 3;
            line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        /* Enhanced shadow utilities */
        .shadow-glow {
            box-shadow: 0 0 20px rgba(255, 199, 44, 0.3);
        }
        
        .shadow-glow-hover:hover {
            box-shadow: 0 0 30px rgba(255, 199, 44, 0.5);
        }
        /* Hero delivery selector helpers */
        .hero-delivery-option {
            user-select: none;
        }
        
        .cart-item-enter {
            animation: cart-item-in 0.3s ease-out forwards;
        }
        @keyframes cart-item-in {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        .modal-scrollbar::-webkit-scrollbar {
            width: 8px;
        }
        .modal-scrollbar::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        .modal-scrollbar::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        .modal-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        .nosotros-img {
            aspect-ratio: 1 / 1;
            object-fit: contain;
            padding: 1rem;
        }
        .bg-pattern {
            background-image: radial-gradient(circle at 20% 80%, rgba(255,255,255,0.1) 0%, transparent 50%),
                            radial-gradient(circle at 80% 20%, rgba(255,255,255,0.1) 0%, transparent 50%),
                            radial-gradient(circle at 40% 40%, rgba(255,255,255,0.05) 0%, transparent 50%);
        }
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        .shimmer::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 2s infinite;
        }
        
        /* Google Maps Address Autocomplete Styles */
        .pac-container {
            background-color: #fff;
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15), 0 2px 8px rgba(0, 0, 0, 0.1);
            border: 2px solid #fbbf24;
            font-family: 'Inter', sans-serif;
            z-index: 10000 !important;
            margin-top: 4px;
        }
        
        .pac-item {
            padding: 12px 16px;
            border-bottom: 1px solid #f3f4f6;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 14px;
        }
        
        .pac-item:hover {
            background-color: #fef3c7;
            transform: translateX(4px);
        }
        
        .pac-item:last-child {
            border-bottom: none;
            border-radius: 0 0 12px 12px;
        }
        
        .pac-item:first-child {
            border-radius: 12px 12px 0 0;
        }
        
        .pac-item-selected {
            background-color: #fef3c7 !important;
        }
        
        .pac-item-query {
            font-weight: 600;
            color: #111827;
            font-size: 14px;
        }
        
        .pac-matched {
            font-weight: 700;
            color: #f59e0b;
        }
        
        .pac-icon {
            margin-right: 12px;
            width: 20px;
            height: 20px;
        }
        
        .pac-icon-marker {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23f59e0b'%3E%3Cpath d='M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z'/%3E%3C/svg%3E") !important;
            background-size: contain;
            background-repeat: no-repeat;
        }
        
        /* Modal search input autocomplete espec칤fico */
        #modal-search-input {
            position: relative;
        }
        
        /* Address input focus state */
        #address-input:focus {
            box-shadow: 0 0 0 3px rgba(251, 191, 36, 0.1);
        }
        

        /* Modal de Mapa Grande - Estilos */
        #map-modal {
            backdrop-filter: blur(4px);
            animation: fadeIn 0.3s ease-out;
        }

        #map-modal.show {
            display: flex !important;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        /* Animaci칩n del marcador central */
        @keyframes bounce {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        /* Estilos responsive para el modal del mapa */
        @media (max-width: 640px) {
            #map-modal .bg-white.rounded-2xl {
                border-radius: 1rem;
            }

            #modal-search-input {
                font-size: 14px;
                padding: 12px 12px 12px 40px;
            }

            #modal-address-preview {
                min-height: 50px;
                font-size: 13px;
            }
        }
        
        /* Map container animations */
        #map-container {
            animation: slideInDown 0.3s ease-out;
        }
        
        @keyframes slideInDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Estilos para autocompletado simulado */
        #address-suggestions {
            max-height: 200px;
            overflow-y: auto;
            scrollbar-width: thin;
        }
        
        #address-suggestions::-webkit-scrollbar {
            width: 4px;
        }
        
        #address-suggestions::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        
        #address-suggestions::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 2px;
        }
        
        .suggestion-item {
            transition: all 0.2s ease;
        }
        
        .suggestion-item:hover {
            background-color: #f9fafb !important;
            transform: translateX(2px);
        }
        
        /* Animaci칩n para el contenedor del mapa */
        #map-container {
            transition: all 0.3s ease-in-out;
        }
        
        #map-container.hidden {
            opacity: 0;
            max-height: 0;
            overflow: hidden;
        }
        
        #map-container:not(.hidden) {
            opacity: 1;
            max-height: 500px;
        }
        
        /* Estilos para resaltar coincidencias */
        mark {
            background-color: #fef3c7;
            color: #92400e;
            padding: 1px 2px;
            border-radius: 2px;
        }

        /* Mobile responsive adjustments for maps */
        @media (max-width: 640px) {
            .pac-container {
                max-width: calc(100vw - 32px);
                margin: 0 16px;
            }
            
            /* (carrito) sin minimapa */
        }

        /* Animaciones premium para promociones - Nivel McDonald's */
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(2deg); }
        }

        .animate-float {
            animation: float 4s ease-in-out infinite;
        }

        @keyframes shimmer-sweep {
            0% { transform: translateX(-100%) skewX(-15deg); }
            100% { transform: translateX(200%) skewX(-15deg); }
        }

        .shimmer-effect::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: shimmer-sweep 3s infinite;
        }

        @keyframes pulse-glow-premium {
            0% { 
                box-shadow: 0 0 0 0 rgba(255, 69, 0, 0.7);
                transform: scale(1);
            }
            70% { 
                box-shadow: 0 0 0 15px rgba(255, 69, 0, 0);
                transform: scale(1.02);
            }
            100% { 
                box-shadow: 0 0 0 0 rgba(255, 69, 0, 0);
                transform: scale(1);
            }
        }

        .pulse-glow-premium {
            animation: pulse-glow-premium 2s infinite;
        }
        
        /* Animaciones para el modal de mapa - Estilo McDonald's/Uber Eats */
        @keyframes fade-in-map {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes scale-in-map {
            from {
                opacity: 0;
                transform: scale(0.95);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        .animate-fade-in {
            animation: fade-in-map 0.3s ease-out;
        }
        
        .animate-scale-in {
            animation: scale-in-map 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        /* OPTIMIZACIONES PARA M칍VIL - Touch y Performance */
        .touch-manipulation {
            touch-action: manipulation; /* Elimina delay de 300ms en m칩vil */
            -webkit-tap-highlight-color: transparent; /* Quita highlight azul en iOS */
        }
        
        /* Mejora el rendimiento del mapa en m칩vil */
        #hero-map {
            -webkit-transform: translateZ(0); /* Hardware acceleration */
            transform: translateZ(0);
        }
        
        /* Botones t치ctiles mejorados */
        button:active {
            transform: scale(0.97);
            transition: transform 0.1s ease;
        }
        
        /* Inputs m치s grandes en m칩vil para evitar zoom */
        @media (max-width: 768px) {
            input[type="text"],
            input[type="email"],
            input[type="tel"],
            textarea,
            select {
                font-size: 16px !important; /* iOS no hace zoom si es >= 16px */
            }
            
            /* Mapa ocupa m치s espacio en m칩vil */
            #map-modal .flex-1 {
                min-height: 50vh;
            }
            
            /* Pin m치s visible en pantallas peque침as */
            .absolute.top-1\/2 svg {
                filter: drop-shadow(0 8px 16px rgba(0,0,0,0.4));
            }
        }

        @keyframes wiggle-premium {
            0%, 100% { transform: rotate(0deg) scale(1); }
            25% { transform: rotate(-5deg) scale(1.05); }
            75% { transform: rotate(5deg) scale(1.05); }
        }

        .animate-wiggle-premium {
            animation: wiggle-premium 1s ease-in-out;
        }

        @keyframes bounce-in-scale {
            0% { 
                opacity: 0;
                transform: scale(0.3) translateY(100px);
            }
            50% {
                opacity: 1;
                transform: scale(1.1) translateY(-10px);
            }
            100% {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .animate-bounce-in {
            animation: bounce-in-scale 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        @keyframes gradient-shift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .gradient-animate {
            background-size: 200% 200%;
            animation: gradient-shift 4s ease infinite;
        }

        @keyframes scale-bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.08); }
        }

        .animate-scale-bounce {
            animation: scale-bounce 2s ease-in-out infinite;
        }

        /* Efectos de hover premium para las tarjetas de promociones */
        .promo-card-premium {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .promo-card-premium:hover {
            transform: translateY(-8px) scale(1.03) rotateX(5deg);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
        }

        /* Efectos de texto brillante */
        @keyframes text-glow {
            0%, 100% { text-shadow: 0 0 10px rgba(255, 255, 255, 0.5); }
            50% { text-shadow: 0 0 20px rgba(255, 255, 255, 0.8), 0 0 30px rgba(255, 255, 255, 0.6); }
        }

        .text-glow {
            animation: text-glow 2s ease-in-out infinite;
        }

        /* Efectos de part칤culas de fondo */
        @keyframes particle-float {
            0% { 
                opacity: 0;
                transform: translateY(100px) scale(0);
            }
            50% {
                opacity: 1;
                transform: translateY(50px) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(0) scale(0);
            }
        }

        .particle-effect {
            animation: particle-float 6s ease-in-out infinite;
        }

        /* Responsive para promociones premium */
        @media (max-width: 640px) {
            .promo-card-premium:hover {
                transform: translateY(-4px) scale(1.02);
                box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
            }
            
            /* Optimizaciones m칩viles para las promociones */
            .mobile-promo-grid {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 1rem !important;
            }
            
            .mobile-promo-card {
                padding: 1rem !important;
                font-size: 0.875rem !important;
            }
        }

        /* Estilos para tabs m칩viles de promociones */
        .mobile-promo-tab {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            white-space: nowrap;
        }

        .mobile-promo-tab.active {
            background: linear-gradient(135deg, #ef4444, #f97316) !important;
            color: white !important;
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
        }

        .mobile-promo-tab:not(.active):hover {
            background: #e5e7eb !important;
            transform: translateY(-1px);
        }

        /* Transici칩n suave entre secciones de promociones m칩viles */
        .mobile-promo-content {
            opacity: 1;
            transform: translateY(0);
            transition: opacity 0.3s ease-out, transform 0.3s ease-out;
        }

        .mobile-promo-content.hidden {
            display: none;
            opacity: 0;
            transform: translateY(12px);
        }

        /* Mejorar scrolling horizontal en tabs */
        .mobile-promo-tab::-webkit-scrollbar {
            display: none;
        }

        /* Efectos para las tarjetas compactas m칩viles */
        @media (max-width: 768px) {
            .promo-compact-card {
                transition: all 0.2s ease;
            }

            .promo-compact-card:active {
                transform: scale(0.98);
                background-color: #f8fafc;
            }
            
            /* Badges inline para m칩viles - mejorados */
            .menu-card-content-mobile .mb-2 span {
                font-size: 0.7rem !important;
                padding: 0.25rem 0.5rem !important;
                margin-right: 0.25rem !important;
                margin-bottom: 0.25rem !important;
                display: inline-block;
                line-height: 1.2;
            }
            
            /* Ajustes espec칤ficos para badges en m칩vil */
            .menu-card-mobile {
                min-height: 130px !important;
            }
            
            .menu-card-content-mobile {
                padding: 0.75rem !important;
            }
        }
        /* 2) Glassmorphism for category pills */
        .category-header-mobile [data-category-header] {
            background: rgba(255, 255, 255, 0.85) !important;
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.55) !important;
        }
        html.dark .category-header-mobile [data-category-header] {
            background: rgba(255, 255, 255, 0.08) !important;
            border: 1px solid rgba(255, 255, 255, 0.12) !important;
        }
        
        /* 3) Micro-interactions */
        .menu-card {
            transition: transform 320ms cubic-bezier(0.4, 0, 0.2, 1), box-shadow 320ms cubic-bezier(0.4, 0, 0.2, 1), border-color 320ms cubic-bezier(0.4, 0, 0.2, 1);
        }
        .menu-card:hover {
            transform: translateY(-10px);
        }

        /* Premium bento layout (desktop) using existing generated markup */
        @media (min-width: 1024px) {
            .menu-grid {
                display: grid !important;
                grid-template-columns: repeat(12, minmax(0, 1fr)) !important;
                grid-auto-flow: dense;
                grid-auto-rows: auto;
            }
            .menu-grid > .menu-card {
                grid-column: span 3;
                border-radius: 24px !important;
            }
            .menu-grid > .menu-card:nth-child(1) {
                grid-column: span 6;
            }
            .menu-grid > .menu-card:nth-child(2),
            .menu-grid > .menu-card:nth-child(3) {
                grid-column: span 3;
            }
            .menu-grid > .menu-card:nth-child(4),
            .menu-grid > .menu-card:nth-child(5) {
                grid-column: span 4;
            }

            /* Prevent large empty gaps inside featured/tall cards */
            .menu-grid > .menu-card > div:last-child {
                flex-grow: 0 !important;
            }
            .menu-grid > .menu-card > div:last-child > div.flex-grow {
                flex-grow: 0 !important;
            }

            /* Carrusel: 3 columnas iguales (sin featured/bento spans) */
            .menu-grid.menu-grid-carousel {
                grid-template-columns: repeat(3, minmax(0, 1fr)) !important;
                grid-auto-flow: row !important;
            }
            .menu-grid.menu-grid-carousel > .menu-card {
                grid-column: auto !important;
            }
            .menu-grid.menu-grid-carousel > .menu-card:nth-child(1),
            .menu-grid.menu-grid-carousel > .menu-card:nth-child(2),
            .menu-grid.menu-grid-carousel > .menu-card:nth-child(3),
            .menu-grid.menu-grid-carousel > .menu-card:nth-child(4),
            .menu-grid.menu-grid-carousel > .menu-card:nth-child(5) {
                grid-column: auto !important;
            }
        }

        /* 24px rounding + dark card surface */
        .menu-card,
        .menu-card-mobile {
            border-radius: 24px !important;
        }
        html.dark .menu-card,
        html.dark .menu-card-mobile {
            border-color: rgba(255, 255, 255, 0.10) !important;
        }
        
        /* 4) Ensure clicks hit the button even when tapping icons */
        .choose-combo-btn i,
        .customize-btn i {
            pointer-events: none;
        }
        
        /* 5) Floating WhatsApp pulse */
        @keyframes waPulse {
            0% { transform: scale(1); box-shadow: 0 12px 30px rgba(16, 185, 129, 0.35); }
            50% { transform: scale(1.04); box-shadow: 0 18px 44px rgba(16, 185, 129, 0.45); }
            100% { transform: scale(1); box-shadow: 0 12px 30px rgba(16, 185, 129, 0.35); }
        }
        .wa-float {
            animation: waPulse 1.8s ease-in-out infinite;
        }

        /* ===== Customization modal (premium) ===== */
        #customization-modal .custom-modal-card {
            border: 1px solid rgba(255, 255, 255, 0.18);
        }
        #customization-modal .custom-modal-header {
            background: linear-gradient(135deg, rgba(255, 199, 44, 0.14) 0%, rgba(255, 255, 255, 0.92) 55%, rgba(255, 255, 255, 0.92) 100%);
        }
        #customization-modal .custom-modal-footer {
            background: rgba(248, 249, 250, 0.9);
        }
        #customization-modal .custom-divider {
            height: 1px;
            width: 100%;
            margin: 18px 0;
            background: rgba(233, 236, 239, 1);
        }
        #customization-modal .custom-section-title {
            letter-spacing: 0.2px;
        }
        #customization-modal .custom-pill {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 2px 10px;
            border-radius: 999px;
            background: rgba(255, 199, 44, 0.22);
            color: #7A4F00;
            border: 1px solid rgba(255, 199, 44, 0.35);
            white-space: nowrap;
            flex: none;
        }

        #customization-modal .custom-option,
        #customization-modal #toppings-container label,
        #customization-modal #menu-extras-container label,
        #customization-modal #base-extra-size-container label {
            background: rgba(255, 255, 255, 0.86);
            border-color: rgba(233, 236, 239, 1);
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.06);
            will-change: transform;
        }
        #customization-modal .custom-option:hover,
        #customization-modal #toppings-container label:hover,
        #customization-modal #menu-extras-container label:hover,
        #customization-modal #base-extra-size-container label:hover {
            transform: translateY(-1px);
            box-shadow: 0 10px 26px rgba(0, 0, 0, 0.10);
        }

        #customization-modal .custom-suboptions {
            border-left: 2px solid rgba(255, 199, 44, 0.35);
        }
        #customization-modal .custom-suboption {
            background: rgba(248, 249, 250, 0.82);
            border: 1px solid rgba(233, 236, 239, 1);
        }
        #customization-modal .custom-suboption:hover {
            background: rgba(248, 249, 250, 0.95);
        }

        /* Dark mode adjustments (modal sits outside #menu scope) */
        html.dark #customization-modal .custom-modal-card {
            background: rgba(2, 6, 23, 0.86);
            border-color: rgba(255, 255, 255, 0.10);
        }
        html.dark #customization-modal .custom-modal-header {
            background: linear-gradient(135deg, rgba(255, 199, 44, 0.10) 0%, rgba(2, 6, 23, 0.86) 55%, rgba(2, 6, 23, 0.86) 100%);
        }
        html.dark #customization-modal .custom-modal-footer {
            background: rgba(15, 23, 42, 0.82);
            border-top-color: rgba(255, 255, 255, 0.08);
        }
        html.dark #customization-modal .text-gray-800 { color: #F3F4F6 !important; }
        html.dark #customization-modal .text-gray-600 { color: #CBD5E1 !important; }
        html.dark #customization-modal .custom-divider { background: rgba(255, 255, 255, 0.10); }
        html.dark #customization-modal .custom-option,
        html.dark #customization-modal #toppings-container label,
        html.dark #customization-modal #menu-extras-container label,
        html.dark #customization-modal #base-extra-size-container label {
            background: rgba(15, 23, 42, 0.78);
            border-color: rgba(255, 255, 255, 0.10);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
        }
        html.dark #customization-modal .custom-suboption {
            background: rgba(15, 23, 42, 0.62);
            border-color: rgba(255, 255, 255, 0.10);
        }
        html.dark #customization-modal .custom-pill {
            background: rgba(255, 199, 44, 0.18);
            color: #FDE68A;
            border-color: rgba(255, 199, 44, 0.22);
        }

        /* ===== Combo modal (high contrast) ===== */
        #combo-modal .combo-modal-card {
            background: rgba(2, 6, 23, 0.90) !important;
            border: 1px solid rgba(255, 255, 255, 0.10) !important;
            color: #E5E7EB;
        }
        #combo-modal .border-b,
        #combo-modal .border-t {
            border-color: rgba(255, 255, 255, 0.10) !important;
        }
        #combo-modal #close-combo-modal-btn {
            color: rgba(226, 232, 240, 0.9);
        }
        #combo-modal #close-combo-modal-btn:hover {
            color: #FFFFFF;
        }

        /* Normalize Tailwind grays inside the combo modal for readability */
        #combo-modal .text-gray-900,
        #combo-modal .text-gray-800,
        #combo-modal .text-gray-700 {
            color: #F9FAFB !important;
        }
        #combo-modal .text-gray-600,
        #combo-modal .text-gray-500 {
            color: rgba(203, 213, 225, 0.92) !important;
        }
        #combo-modal .text-black {
            color: #F9FAFB !important;
        }

        /* Darken common light backgrounds used by the combo templates */
        #combo-modal .bg-white {
            background-color: rgba(15, 23, 42, 0.92) !important;
        }
        #combo-modal .bg-gray-50,
        #combo-modal .bg-gray-100,
        #combo-modal .bg-gray-200 {
            background-color: rgba(15, 23, 42, 0.78) !important;
        }
        #combo-modal .hover\:bg-gray-50:hover,
        #combo-modal .hover\:bg-gray-300:hover {
            background-color: rgba(255, 255, 255, 0.08) !important;
        }

        /* Buttons inside combo modal */
        #combo-modal .combo-customize-btn,
        #combo-modal .hotdog-customize-btn {
            background: rgba(255, 255, 255, 0.08) !important;
            border: 1px solid rgba(255, 255, 255, 0.12) !important;
            color: #F9FAFB !important;
        }
        #combo-modal .combo-customize-btn:hover,
        #combo-modal .hotdog-customize-btn:hover {
            background: rgba(255, 255, 255, 0.12) !important;
        }

        /* ===== Cart sidebar (premium) ===== */
        #cart-sidebar.cart-sidebar {
            background: rgba(255, 255, 255, 0.92);
            backdrop-filter: blur(18px);
            -webkit-backdrop-filter: blur(18px);
            border-left: 1px solid rgba(233, 236, 239, 1);
        }
        #cart-sidebar .cart-header {
            background: linear-gradient(135deg, rgba(255, 199, 44, 0.18) 0%, rgba(255, 255, 255, 0.94) 60%);
        }
        #cart-sidebar .cart-close {
            width: 40px;
            height: 40px;
            border-radius: 999px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.75);
            border: 1px solid rgba(233, 236, 239, 1);
            box-shadow: 0 8px 20px rgba(0,0,0,0.10);
            transition: transform 0.15s ease, box-shadow 0.15s ease;
        }
        #cart-sidebar .cart-close:hover {
            transform: translateY(-1px);
            box-shadow: 0 12px 28px rgba(0,0,0,0.14);
        }
        #cart-sidebar .cart-footer {
            background: rgba(248, 249, 250, 0.92);
        }

        /* Dark mode for cart sidebar */
        html.dark #cart-sidebar.cart-sidebar {
            background: rgba(2, 6, 23, 0.88);
            border-left-color: rgba(255, 255, 255, 0.10);
        }
        html.dark #cart-sidebar .cart-header {
            background: linear-gradient(135deg, rgba(255, 199, 44, 0.10) 0%, rgba(2, 6, 23, 0.88) 62%);
            border-bottom-color: rgba(255, 255, 255, 0.10);
        }
        html.dark #cart-sidebar .cart-footer {
            background: rgba(15, 23, 42, 0.82);
            border-top-color: rgba(255, 255, 255, 0.10);
        }
        html.dark #cart-sidebar .text-gray-500 { color: #94A3B8 !important; }
        html.dark #cart-sidebar .text-gray-600 { color: #CBD5E1 !important; }
        html.dark #cart-sidebar h3 { color: #F8FAFC !important; }
        html.dark #cart-sidebar .cart-close {
            background: rgba(15, 23, 42, 0.70);
            border-color: rgba(255, 255, 255, 0.10);
            color: #E5E7EB;
            box-shadow: 0 12px 30px rgba(0,0,0,0.35);
        }

        /* Dark mode: cart item cards should not be white */
        html.dark #cart-sidebar #cart-items .cart-item-card {
            background: rgba(15, 23, 42, 0.78) !important;
            border-color: rgba(255, 255, 255, 0.10) !important;
            box-shadow: 0 14px 34px rgba(0,0,0,0.32);
        }
        html.dark #cart-sidebar #cart-items .cart-item-thumb,
        html.dark #cart-sidebar #cart-items .cart-qty-pill {
            background: rgba(2, 6, 23, 0.55) !important;
            border-color: rgba(255, 255, 255, 0.10) !important;
        }
        html.dark #cart-sidebar #cart-items .cart-qty-btn {
            color: #F8FAFC !important;
        }
        html.dark #cart-sidebar #cart-items .cart-qty-btn:hover {
            background: rgba(255, 255, 255, 0.10) !important;
        }

        /* ===== Checkout modal (premium) ===== */
        #checkout-modal .checkout-card {
            border: 1px solid rgba(255, 255, 255, 0.18);
        }
        #checkout-modal .checkout-header {
            background: linear-gradient(135deg, rgba(255, 199, 44, 0.16) 0%, rgba(255, 255, 255, 0.94) 60%);
        }
        #checkout-modal .checkout-body {
            background: linear-gradient(180deg, rgba(248, 249, 250, 0.92) 0%, rgba(255, 255, 255, 0.92) 100%);
        }
        #checkout-modal .checkout-close {
            background: rgba(255, 255, 255, 0.80);
            border: 1px solid rgba(233, 236, 239, 1);
            color: #374151;
            box-shadow: 0 10px 26px rgba(0,0,0,0.12);
            transition: transform 0.15s ease, box-shadow 0.15s ease;
        }
        #checkout-modal .checkout-close:hover {
            transform: translateY(-1px);
            box-shadow: 0 14px 34px rgba(0,0,0,0.16);
        }
        #checkout-modal .checkout-panel {
            box-shadow: 0 10px 30px rgba(0,0,0,0.06);
            border-color: rgba(233, 236, 239, 1);
        }
        #checkout-modal .checkout-option {
            box-shadow: 0 6px 18px rgba(0,0,0,0.05);
            border-color: rgba(233, 236, 239, 1);
        }

        /* Dark mode for checkout modal */
        html.dark #checkout-modal .checkout-card {
            background: rgba(2, 6, 23, 0.88);
            border-color: rgba(255, 255, 255, 0.10);
        }
        html.dark #checkout-modal .checkout-header {
            background: linear-gradient(135deg, rgba(255, 199, 44, 0.10) 0%, rgba(2, 6, 23, 0.88) 62%);
            border-bottom-color: rgba(255, 255, 255, 0.10);
        }
        html.dark #checkout-modal .checkout-body {
            background: linear-gradient(180deg, rgba(2, 6, 23, 0.88) 0%, rgba(15, 23, 42, 0.82) 100%);
        }
        html.dark #checkout-modal .checkout-close {
            background: rgba(15, 23, 42, 0.72);
            border-color: rgba(255, 255, 255, 0.10);
            color: #E5E7EB;
            box-shadow: 0 14px 34px rgba(0,0,0,0.35);
        }
        html.dark #checkout-modal .checkout-panel {
            background: rgba(15, 23, 42, 0.70) !important;
            border-color: rgba(255, 255, 255, 0.10) !important;
            box-shadow: 0 14px 34px rgba(0,0,0,0.32);
        }
        html.dark #checkout-modal .text-gray-800 { color: #F3F4F6 !important; }
        html.dark #checkout-modal .text-gray-600 { color: #CBD5E1 !important; }
        html.dark #checkout-modal .text-gray-700 { color: #CBD5E1 !important; }
        html.dark #checkout-modal .bg-gray-50 { background: rgba(15, 23, 42, 0.55) !important; }
        html.dark #checkout-modal input,
        html.dark #checkout-modal textarea,
        html.dark #checkout-modal select {
            background: rgba(2, 6, 23, 0.55) !important;
            border-color: rgba(255, 255, 255, 0.12) !important;
            color: #F8FAFC !important;
        }

        /* Input frames: clear borders in light/dark */
        #checkout-modal input,
        #checkout-modal textarea,
        #checkout-modal select {
            border-width: 2px !important;
            border-style: solid !important;
            border-color: rgba(17, 24, 39, 0.85) !important; /* black-ish */
        }
        #checkout-modal input:focus,
        #checkout-modal textarea:focus,
        #checkout-modal select:focus {
            border-color: rgba(17, 24, 39, 1) !important;
            outline: none !important;
        }
        html.dark #checkout-modal input,
        html.dark #checkout-modal textarea,
        html.dark #checkout-modal select {
            border-color: rgba(255, 255, 255, 0.85) !important; /* white */
        }
        html.dark #checkout-modal input:focus,
        html.dark #checkout-modal textarea:focus,
        html.dark #checkout-modal select:focus {
            border-color: rgba(255, 255, 255, 1) !important;
            outline: none !important;
        }

        /* Typography: force readable text colors in checkout + cart */
        #checkout-modal {
            color: #0F172A;
        }
        #cart-sidebar {
            color: #0F172A;
        }
        /* Normalize common Tailwind grays inside these containers */
        #checkout-modal .text-gray-400,
        #checkout-modal .text-gray-500,
        #checkout-modal .text-gray-600,
        #checkout-modal .text-gray-700,
        #checkout-modal .text-gray-800,
        #cart-sidebar .text-gray-400,
        #cart-sidebar .text-gray-500,
        #cart-sidebar .text-gray-600,
        #cart-sidebar .text-gray-700,
        #cart-sidebar .text-gray-800 {
            color: #0F172A !important;
        }
        /* Placeholders */
        #checkout-modal input::placeholder,
        #checkout-modal textarea::placeholder {
            color: rgba(15, 23, 42, 0.55) !important;
        }

        html.dark #checkout-modal {
            color: #F8FAFC;
        }
        html.dark #cart-sidebar {
            color: #F8FAFC;
        }
        html.dark #checkout-modal .text-gray-400,
        html.dark #checkout-modal .text-gray-500,
        html.dark #checkout-modal .text-gray-600,
        html.dark #checkout-modal .text-gray-700,
        html.dark #checkout-modal .text-gray-800,
        html.dark #cart-sidebar .text-gray-400,
        html.dark #cart-sidebar .text-gray-500,
        html.dark #cart-sidebar .text-gray-600,
        html.dark #cart-sidebar .text-gray-700,
        html.dark #cart-sidebar .text-gray-800 {
            color: #F8FAFC !important;
        }
        html.dark #checkout-modal input::placeholder,
        html.dark #checkout-modal textarea::placeholder {
            color: rgba(248, 250, 252, 0.60) !important;
        }

        /* Fix: JS-rendered order summary uses solid bg-white/bg-gray-50 */
        #checkout-modal #order-summary .order-summary-item {
            background: rgba(255, 255, 255, 0.92) !important;
            backdrop-filter: blur(14px);
            -webkit-backdrop-filter: blur(14px);
            border-color: rgba(233, 236, 239, 0.9) !important;
            color: #111827;
        }
        #checkout-modal #order-summary .order-summary-title {
            color: #111827 !important;
        }
        #checkout-modal #order-summary .order-summary-meta {
            color: #374151 !important;
        }
        #checkout-modal #order-summary .order-summary-item .text-gray-500 {
            color: #374151 !important;
        }
        #checkout-modal #order-summary .order-summary-item .text-gray-400 {
            color: #4B5563 !important;
        }
        #checkout-modal #order-summary .order-summary-totals {
            background: rgba(255, 255, 255, 0.86) !important;
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-color: rgba(233, 236, 239, 0.9) !important;
            color: #111827;
        }
        #checkout-modal #order-summary .order-summary-totals .text-gray-600 {
            color: #374151 !important;
        }
        html.dark #checkout-modal #order-summary .order-summary-item {
            background: rgba(15, 23, 42, 0.78) !important;
            border-color: rgba(255, 255, 255, 0.10) !important;
            color: #F8FAFC;
        }
        html.dark #checkout-modal #order-summary .order-summary-title {
            color: #F8FAFC !important;
        }
        html.dark #checkout-modal #order-summary .order-summary-meta {
            color: #CBD5E1 !important;
        }
        html.dark #checkout-modal #order-summary .order-summary-item .text-gray-500,
        html.dark #checkout-modal #order-summary .order-summary-item .text-gray-400 {
            color: #CBD5E1 !important;
        }
        html.dark #checkout-modal #order-summary .order-summary-totals {
            background: rgba(15, 23, 42, 0.70) !important;
            border-color: rgba(255, 255, 255, 0.10) !important;
            color: #F8FAFC;
        }
        html.dark #checkout-modal #order-summary .order-summary-totals .text-gray-600 {
            color: #CBD5E1 !important;
        }

        /* Fix: validation banner looks like a solid white/opaque slab */
        #checkout-modal #checkout-validation-msg {
            background: rgba(255, 255, 255, 0.72) !important;
            backdrop-filter: blur(14px);
            -webkit-backdrop-filter: blur(14px);
            border: 1px solid rgba(239, 68, 68, 0.25) !important;
        }
        html.dark #checkout-modal #checkout-validation-msg {
            background: rgba(15, 23, 42, 0.72) !important;
            border-color: rgba(239, 68, 68, 0.28) !important;
            color: #FCA5A5 !important;
        }

        /* Ajustes tipogr치ficos espec칤ficos para pedido-manual (mejor en celulares) */
        body.sr-manual-fast {
            font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }

        @media (max-width: 640px) {
            body.sr-manual-fast .text-5xl,
            body.sr-manual-fast .text-4xl,
            body.sr-manual-fast .text-3xl,
            body.sr-manual-fast h1,
            body.sr-manual-fast h2,
            body.sr-manual-fast h3 {
                font-size: 1.4rem !important;
            }

            body.sr-manual-fast .text-2xl,
            body.sr-manual-fast .text-xl {
                font-size: 1.1rem !important;
            }

            body.sr-manual-fast .text-lg {
                font-size: 0.98rem !important;
            }

            body.sr-manual-fast .text-base {
                font-size: 0.9rem !important;
            }

            body.sr-manual-fast .text-sm {
                font-size: 0.8rem !important;
            }

            body.sr-manual-fast .text-xs {
                font-size: 0.7rem !important;
            }
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 dark:bg-gray-950 dark:text-gray-100 sr-manual-fast">

    <script>
        // Flag for shared checkout logic: manual orders should NOT redirect to WhatsApp.
        window.__MANUAL_MODE = true;
    </script>
    <header id="inicio" class="glass-effect shadow-lg sticky top-0 z-50 border-b border-white/20">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16 sm:h-24">
                <div class="flex items-center space-x-2 sm:space-x-4">
                    <div class="w-8 h-8 sm:w-12 sm:h-12 bg-gradient-to-br from-yellow-400 to-yellow-600 rounded-xl flex items-center justify-center shadow-md">
                        <i class="fas fa-hamburger text-white text-sm sm:text-xl"></i>
                    </div>
                    <div class="flex flex-col">
                        <a href="#inicio" class="text-lg sm:text-3xl font-bold font-poppins text-gray-900">
                            SR & SRA <span class="text-transparent bg-clip-text bg-gradient-to-r from-yellow-500 to-orange-500">BURGER</span>
                        </a>
                        <span class="text-xs sm:text-sm text-gray-500 font-medium hidden sm:block">Sucursal Minatitl치n, Veracruz</span>
                    </div>
                </div>
                <nav class="hidden lg:flex items-center space-x-8">
                    <a href="#menu" class="text-gray-700 hover:text-yellow-600 transition-all duration-300 font-medium relative group">
                        Men칰
                        <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-yellow-500 transition-all duration-300 group-hover:w-full"></span>
                    </a>
                    <a href="#nosotros" class="text-gray-700 hover:text-yellow-600 transition-all duration-300 font-medium relative group">
                        Nosotros
                        <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-yellow-500 transition-all duration-300 group-hover:w-full"></span>
                    </a>
                    <a href="#contacto" class="text-gray-700 hover:text-yellow-600 transition-all duration-300 font-medium relative group">
                        Contacto
                        <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-yellow-500 transition-all duration-300 group-hover:w-full"></span>
                    </a>
                    <a href="cliente.html" class="text-gray-700 hover:text-yellow-600 transition-all duration-300 font-medium relative group flex items-center gap-2">
                        <span id="nav-account-text">Mi cuenta</span>
                        <span id="nav-session-indicator" class="hidden text-xs font-semibold text-green-500 bg-green-50/90 border border-green-200 px-2 py-0.5 rounded-full">
                            Sesi칩n iniciada
                        </span>
                        <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-yellow-500 transition-all duration-300 group-hover:w-full"></span>
                    </a>
                    <button id="promotions-btn" class="relative overflow-hidden bg-gradient-to-r from-red-500 via-orange-500 to-yellow-500 text-white px-6 py-3 rounded-2xl hover:from-red-600 hover:via-orange-600 hover:to-yellow-600 transition-all duration-300 font-black shadow-xl hover:shadow-2xl transform hover:-translate-y-1 hover:scale-105 pulse-glow">
                        <span class="relative z-10 flex items-center space-x-2">
                            <i class="fas fa-fire animate-bounce"></i>
                            <span>OFERTAS HOT</span>
                            <div class="bg-white text-red-600 px-2 py-1 rounded-full text-xs font-black animate-pulse">NUEVO</div>
                        </span>
                        <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent transform -skew-x-12 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"></div>
                    </button>
                </nav>
                <div class="flex items-center space-x-2 sm:space-x-4">
                    <button id="theme-toggle" type="button" class="p-2 sm:p-3 rounded-xl bg-gray-100 hover:bg-gray-200 dark:bg-white/10 dark:hover:bg-white/15 transition-colors" aria-label="Cambiar tema">
                        <i class="fas fa-moon text-gray-700 dark:hidden"></i>
                        <i class="fas fa-sun text-yellow-300 hidden dark:inline"></i>
                    </button>
                    <a href="cliente.html" id="mobile-account-btn" class="lg:hidden p-2 sm:p-3 rounded-xl bg-gray-100 hover:bg-gray-200 transition-colors" aria-label="Mi cuenta / Iniciar sesi칩n">
                        <i class="fas fa-user text-gray-700 text-sm sm:text-base"></i>
                    </a>
                    <button id="open-cart-btn" class="btn-primary flex items-center space-x-2 sm:space-x-3 shadow-lg text-sm sm:text-base px-3 py-2 sm:px-6 sm:py-3">
                        <i class="fas fa-shopping-cart text-sm sm:text-lg"></i>
                        <span class="hidden sm:inline font-semibold">Carrito</span>
                        <span id="cart-count" class="bg-white text-yellow-600 text-xs sm:text-sm font-bold rounded-full h-5 w-5 sm:h-6 sm:w-6 flex items-center justify-center shadow-sm">0</span>
                    </button>
                    <button id="mobile-menu-btn" class="lg:hidden p-2 sm:p-3 rounded-xl bg-gray-100 hover:bg-gray-200 transition-colors">
                        <i class="fas fa-bars text-gray-700 text-sm sm:text-base"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Men칰 m칩vil deslizable -->
    <div id="mobile-menu" class="fixed top-0 left-0 h-full w-80 bg-white shadow-2xl transform -translate-x-full transition-transform duration-300 z-50 lg:hidden">
        <div class="p-6">
            <!-- Header del men칰 m칩vil -->
            <div class="flex items-center justify-between mb-8">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-gradient-to-br from-yellow-400 to-yellow-600 rounded-xl flex items-center justify-center">
                        <i class="fas fa-hamburger text-white"></i>
                    </div>
                    <div>
                        <h2 class="text-lg font-bold font-poppins text-gray-900">SR & SRA <span class="text-yellow-600">BURGER</span></h2>
                    </div>
                </div>
                <button id="close-mobile-menu" class="p-2 rounded-lg bg-gray-100 hover:bg-gray-200 transition-colors">
                    <i class="fas fa-times text-gray-700"></i>
                </button>
            </div>

            <!-- Navegaci칩n del men칰 m칩vil -->
            <nav class="space-y-4">
                <a href="cliente.html" class="flex items-center space-x-3 p-3 rounded-xl hover:bg-gray-50 transition-colors group">
                    <i class="fas fa-user text-gray-600 group-hover:text-yellow-600"></i>
                    <span class="text-gray-800 font-medium group-hover:text-yellow-600">Mi cuenta / Iniciar sesi칩n</span>
                </a>
                <a href="#menu" class="flex items-center space-x-3 p-3 rounded-xl hover:bg-gray-50 transition-colors group">
                    <i class="fas fa-utensils text-gray-600 group-hover:text-yellow-600"></i>
                    <span class="text-gray-800 font-medium group-hover:text-yellow-600">Men칰</span>
                </a>
                <a href="#nosotros" class="flex items-center space-x-3 p-3 rounded-xl hover:bg-gray-50 transition-colors group">
                    <i class="fas fa-users text-gray-600 group-hover:text-yellow-600"></i>
                    <span class="text-gray-800 font-medium group-hover:text-yellow-600">Nosotros</span>
                </a>
                <a href="#contacto" class="flex items-center space-x-3 p-3 rounded-xl hover:bg-gray-50 transition-colors group">
                    <i class="fas fa-phone text-gray-600 group-hover:text-yellow-600"></i>
                    <span class="text-gray-800 font-medium group-hover:text-yellow-600">Contacto</span>
                </a>
                
                <!-- Bot칩n de ofertas en men칰 m칩vil -->
                <button id="mobile-promotions-btn" class="w-full flex items-center space-x-3 p-3 rounded-xl bg-gradient-to-r from-red-500 via-orange-500 to-yellow-500 text-white hover:from-red-600 hover:via-orange-600 hover:to-yellow-600 transition-all transform hover:scale-105">
                    <i class="fas fa-fire animate-bounce"></i>
                    <span class="font-bold">OFERTAS HOT</span>
                    <div class="bg-white text-red-600 px-2 py-1 rounded-full text-xs font-black animate-pulse ml-auto">NUEVO</div>
                </button>

            </nav>

            <!-- Informaci칩n de contacto en el men칰 m칩vil -->
            <div class="mt-8 pt-8 border-t border-gray-200">
                <div class="space-y-3">
                    <div class="flex items-center space-x-3 text-sm text-gray-600">
                        <i class="fas fa-clock"></i>
                        <span>Entrega: 25-35 min</span>
                    </div>
                    <div class="flex items-center space-x-3 text-sm text-gray-600">
                        <i class="fas fa-phone"></i>
                        <span>WhatsApp: +52 922 159 3688</span>
                    </div>
                    <div class="flex items-center space-x-3 text-sm text-gray-600">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>Cobertura: Toda la ciudad de Minatitl치n</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Overlay para el men칰 m칩vil -->
    <div id="mobile-menu-overlay" class="fixed inset-0 bg-black/50 z-40 hidden lg:hidden"></div>

    <section class="hero-bg text-white min-h-[70vh] sm:min-h-[80vh] flex items-center relative overflow-hidden hidden">
        <div class="absolute inset-0 bg-black/10"></div>
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10">
            <div class="max-w-4xl mx-auto">
                <h1 class="text-3xl sm:text-5xl md:text-7xl lg:text-8xl font-extrabold font-poppins leading-tight mb-4 sm:mb-6 text-white drop-shadow-2xl">
                    Hechas con <span class="text-transparent bg-clip-text bg-gradient-to-r from-yellow-300 to-orange-400">Pasi칩n</span>,<br>
                    Devoradas con <span class="text-transparent bg-clip-text bg-gradient-to-r from-yellow-300 to-orange-400">Amor</span>.
                </h1>
                <p class="text-base sm:text-xl md:text-2xl text-gray-200 mb-6 sm:mb-10 max-w-3xl mx-auto font-medium leading-relaxed px-4">
                    La mejor hamburguesa que probar치s, creada por una pareja con un sue침o y pasi칩n por la excelencia culinaria.
                </p>
                <div class="flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center items-center px-4">
                    <a href="#menu" class="btn-primary text-base sm:text-lg px-6 sm:px-8 py-3 sm:py-4 font-bold transform hover:scale-105 shadow-2xl w-full sm:w-auto">
                        <i class="fas fa-utensils mr-2"></i>
                        EXPLORAR MEN칔
                    </a>
                    <a href="#nosotros" class="bg-white/10 backdrop-blur-sm text-white px-6 sm:px-8 py-3 sm:py-4 rounded-full font-semibold hover:bg-white/20 transition-all duration-300 border border-white/30 w-full sm:w-auto">
                        <i class="fas fa-play mr-2"></i>
                        Ver Historia
                    </a>
                </div>
                <!-- Selector r치pido: tipo de entrega en pantalla principal (m치s visible) -->
                <div class="mt-5 flex justify-center">
                    <div id="hero-delivery-selector" class="flex flex-col sm:flex-row items-center justify-center gap-3 sm:gap-4 px-4 py-3 bg-white/15 backdrop-blur-md rounded-2xl border border-white/30 shadow-2xl">
                        <label data-value="pickup" class="hero-delivery-option inline-flex items-center gap-2 px-4 sm:px-6 py-2.5 sm:py-3 rounded-full font-bold text-sm sm:text-base text-white/95 cursor-pointer transition-all ring-1 ring-white/30 hover:bg-white/20">
                            <input type="radio" name="hero-delivery-type" value="pickup" class="sr-only">
                            <span class="text-lg sm:text-xl">游낅</span>
                            <span>Recoger en local</span>
                        </label>
                        <label data-value="delivery" class="hero-delivery-option inline-flex items-center gap-2 px-4 sm:px-6 py-2.5 sm:py-3 rounded-full font-bold text-sm sm:text-base text-white/95 cursor-pointer transition-all ring-1 ring-white/30 hover:bg-white/20">
                            <input type="radio" name="hero-delivery-type" value="delivery" class="sr-only" checked>
                            <span class="text-lg sm:text-xl">游뚱</span>
                            <span>Env칤o a domicilio</span>
                        </label>
                    </div>
                </div>
                <!-- Mensajes informativos para tipo de entrega (sin mapas) -->
                <div class="mt-4 px-4">
                    <div class="max-w-2xl mx-auto bg-white/90 dark:bg-slate-900/80 backdrop-blur-sm border border-yellow-200 dark:border-white/10 rounded-2xl p-4 shadow-sm text-sm text-gray-800 dark:text-slate-100" id="hero-delivery-info">
                        <p class="font-semibold mb-1">游뚱 Env칤o a domicilio</p>
                        <p>
                            El env칤o se calcula autom치ticamente a <strong>$8 por KM</strong> (m치ximo <strong>12 km</strong>, redondeo al entero m치s cercano).
                            Si ya tienes tu ubicaci칩n guardada en <strong>Mi cuenta</strong>, se usar치 al ordenar.
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <!-- Elementos decorativos flotantes -->
        <div class="absolute top-20 left-10 w-20 h-20 bg-yellow-400/20 rounded-full blur-xl animate-pulse hidden sm:block"></div>
        <div class="absolute bottom-20 right-10 w-32 h-32 bg-orange-400/20 rounded-full blur-xl animate-pulse hidden sm:block" style="animation-delay: 1s;"></div>
        <div class="absolute top-1/2 left-1/4 w-4 h-4 bg-white/50 rounded-full animate-bounce hidden sm:block"></div>
        <div class="absolute top-1/3 right-1/4 w-6 h-6 bg-yellow-300/60 rounded-full animate-bounce hidden sm:block" style="animation-delay: 0.5s;"></div>
    </section>

    

    <main id="menu" class="py-20 bg-gradient-to-b from-gray-50 to-white">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <span class="inline-block px-4 py-2 bg-yellow-100 text-yellow-800 rounded-full text-sm font-semibold mb-4">
                    MEN칔 GOURMET
                </span>
                <h2 class="text-4xl md:text-5xl font-bold font-poppins text-gray-900 mb-6">
                    Nuestras <span class="text-transparent bg-clip-text bg-gradient-to-r from-yellow-500 to-orange-500">Deliciosas</span> Creaciones
                </h2>
                <p class="text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed">
                    Cada hamburguesa es una obra maestra culinaria, preparada con ingredientes frescos y premium para ofrecerte una experiencia gastron칩mica 칰nica.
                </p>
            </div>
            <div id="menu-gate" class="max-w-3xl mx-auto">
                <div class="p-6 rounded-2xl border border-white/10 bg-white/5 backdrop-blur-md text-center">
                    <h2 class="text-2xl md:text-3xl font-extrabold tracking-tight">Men칰</h2>
                    <p class="mt-2 text-white/80">Toca para ver las categor칤as y empezar tu pedido.</p>
                    <button id="show-menu-btn" type="button" class="mt-5 inline-flex items-center justify-center gap-2 px-6 py-3 rounded-2xl bg-amber-400 text-slate-900 font-bold hover:brightness-110 active:scale-[0.99] transition">
                        Mostrar men칰
                    </button>
                </div>
            </div>

            <div id="menu-categories" class="space-y-16"></div>
        </div>
    </main>

    <section id="nosotros" class="py-20 bg-white relative overflow-hidden hidden">
        <div class="absolute top-0 left-0 w-full h-full bg-gradient-to-br from-yellow-50/50 to-orange-50/50"></div>
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
            <div class="flex flex-col lg:flex-row items-center gap-16">
                <div class="lg:w-1/2">
                    <div class="relative">
                        <div class="absolute -inset-4 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-3xl blur opacity-20"></div>
                    <!-- Imagen removida en pedido-manual para cargar m치s r치pido -->
                    </div>
                </div>
                <div class="lg:w-1/2 text-center lg:text-left bg-white/85 backdrop-blur-sm rounded-3xl p-6 sm:p-8 border border-black/5 shadow-sm">
                    <span class="inline-block px-4 py-2 bg-yellow-100 text-yellow-800 rounded-full text-sm font-semibold mb-4">
                        NUESTRA HISTORIA
                    </span>
                    <h2 class="text-4xl md:text-5xl font-bold font-poppins mb-6 text-gray-900">
                        Una Historia de <span class="text-transparent bg-clip-text bg-gradient-to-r from-yellow-500 to-orange-500">Amor</span> y <span class="text-transparent bg-clip-text bg-gradient-to-r from-yellow-500 to-orange-500">Sabor</span>
                    </h2>
                    <div class="space-y-4 text-lg text-gray-900 leading-relaxed">
                        <p>
                            Bienvenidos a <strong class="text-red-600">SR & SRA BURGER</strong>, donde cada hamburguesa es hecha con pasi칩n y amor. Somos una pareja trabajando juntos para lograr nuestros sue침os, tray칠ndote el mejor sabor en cada bocado.
                        </p>
                        <p>
                            M치s que solo comida, ofrecemos una experiencia deliciosa que nace de nuestro esfuerzo y dedicaci칩n. Gracias por apoyarnos y ser parte de nuestra historia.
                        </p>
                    </div>
                    <div class="mt-8 flex flex-col sm:flex-row gap-4">
                        <a href="#nosotros" class="btn-primary inline-flex items-center justify-center">
                            <i class="fas fa-heart mr-2"></i>
                            Conoce M치s
                        </a>
                        <a href="#contacto" class="px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-full hover:border-yellow-500 hover:text-yellow-600 transition-all duration-300 font-semibold inline-flex items-center justify-center">
                            <i class="fas fa-phone mr-2"></i>
                            Cont치ctanos
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="contacto" class="py-12 sm:py-20 bg-gradient-to-b from-gray-800 to-gray-900 hidden">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-8 sm:mb-16">
                <span class="inline-block px-4 py-2 bg-yellow-100 text-yellow-800 rounded-full text-sm font-semibold mb-4">
                    CONT츼CTANOS
                </span>
                <h2 class="text-2xl sm:text-4xl md:text-5xl font-bold font-poppins mb-4 sm:mb-6 text-white">
                    춰Haz tu <span class="text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-orange-400">Pedido</span> y S칤guenos!
                </h2>
                <p class="text-base sm:text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed px-4">
                    Estamos aqu칤 para servirte con la mejor atenci칩n. Cont치ctanos para hacer tu pedido o resolver cualquier consulta.
                </p>
            </div>
            
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-3 sm:gap-6 max-w-6xl mx-auto">
                <a href="tel:9221593688" class="card-modern text-center group hover:bg-yellow-50 transition-all duration-300 min-h-[120px] flex flex-col justify-center">
                    <div class="w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-2xl flex items-center justify-center mx-auto mb-3 sm:mb-4 shadow-lg group-hover:scale-110 transition-transform duration-300">
                        <i class="fas fa-phone text-white text-lg sm:text-2xl"></i>
                    </div>
                    <h3 class="font-bold text-white mb-1 sm:mb-2 text-sm sm:text-base">Tel칠fono</h3>
                    <p class="text-white font-semibold text-xs sm:text-sm">922 159 3688</p>
                </a>
                
                <a href="https://wa.me/5219221593688" target="_blank" class="card-modern text-center group hover:bg-green-50 transition-all duration-300 min-h-[120px] flex flex-col justify-center">
                    <div class="w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br from-green-400 to-green-500 rounded-2xl flex items-center justify-center mx-auto mb-3 sm:mb-4 shadow-lg group-hover:scale-110 transition-transform duration-300">
                        <i class="fab fa-whatsapp text-white text-lg sm:text-2xl"></i>
                    </div>
                    <h3 class="font-bold text-gray-800 mb-1 sm:mb-2 text-sm sm:text-base">WhatsApp</h3>
                    <p class="text-gray-600 font-semibold text-xs sm:text-sm">Mensaje directo</p>
                </a>
                
                <a href="https://www.facebook.com/profile.php?id=61570144580225" target="_blank" class="card-modern text-center group hover:bg-blue-50 transition-all duration-300 min-h-[120px] flex flex-col justify-center">
                    <div class="w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-3 sm:mb-4 shadow-lg group-hover:scale-110 transition-transform duration-300">
                        <i class="fab fa-facebook text-white text-lg sm:text-2xl"></i>
                    </div>
                    <h3 class="font-bold text-gray-800 mb-1 sm:mb-2 text-sm sm:text-base">Facebook</h3>
                    <p class="text-gray-600 font-semibold text-xs sm:text-sm">S칤guenos</p>
                </a>
                
                <a href="https://www.instagram.com/srysraburger/" target="_blank" class="card-modern text-center group hover:bg-pink-50 transition-all duration-300 min-h-[120px] flex flex-col justify-center">
                    <div class="w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br from-pink-500 to-rose-500 rounded-2xl flex items-center justify-center mx-auto mb-3 sm:mb-4 shadow-lg group-hover:scale-110 transition-transform duration-300">
                        <i class="fab fa-instagram text-white text-lg sm:text-2xl"></i>
                    </div>
                    <h3 class="font-bold text-gray-800 mb-1 sm:mb-2 text-sm sm:text-base">Instagram</h3>
                    <p class="text-gray-600 font-semibold text-xs sm:text-sm">@srysraburger</p>
                </a>
                
                <a href="https://www.tiktok.com/@srsra.burger" target="_blank" class="card-modern text-center group hover:bg-gray-50 transition-all duration-300 min-h-[120px] flex flex-col justify-center sm:col-span-2 lg:col-span-1">
                    <div class="w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br from-gray-800 to-black rounded-2xl flex items-center justify-center mx-auto mb-3 sm:mb-4 shadow-lg group-hover:scale-110 transition-transform duration-300">
                        <i class="fab fa-tiktok text-white text-lg sm:text-2xl"></i>
                    </div>
                    <h3 class="font-bold text-gray-800 mb-1 sm:mb-2 text-sm sm:text-base">TikTok</h3>
                    <p class="text-gray-600 font-semibold text-xs sm:text-sm">@srsra.burger</p>
                </a>
            </div>
        </div>
    </section>

    <!-- FAQ / Preguntas frecuentes -->
    <section id="faq" class="py-16 bg-white hidden">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 max-w-5xl">
            <h2 class="text-3xl sm:text-5xl font-extrabold text-center text-gray-900 mb-10 sm:mb-14 font-poppins">
                쯅ecesitas alguna raz칩n m치s?
            </h2>

            <!-- Estilos m칤nimos para el acorde칩n -->
            <style>
                summary::-webkit-details-marker{display:none}
                .faq-chevron{transition:transform .2s ease}
                details[open] .faq-chevron{transform:rotate(180deg)}
            </style>

            <div class="divide-y divide-gray-200 bg-white rounded-2xl border border-gray-200">
                <details class="group">
                    <summary class="cursor-pointer select-none py-4 px-4 sm:px-6 flex items-center justify-between">
                        <span class="text-base sm:text-lg text-gray-800 font-medium">쯈u칠 medios de pago aceptan?</span>
                        <i class="faq-chevron fas fa-chevron-down text-gray-500"></i>
                    </summary>
                    <div class="px-4 sm:px-6 pb-5 text-gray-600 text-sm sm:text-base">
                        Aceptamos: Efectivo, Tarjeta (en terminal), y Transferencia. Puedes indicarlo al confirmar tu pedido.
                    </div>
                </details>

                <details class="group">
                    <summary class="cursor-pointer select-none py-4 px-4 sm:px-6 flex items-center justify-between">
                        <span class="text-base sm:text-lg text-gray-800 font-medium">쮺칩mo puedo cancelar mi pedido?</span>
                        <i class="faq-chevron fas fa-chevron-down text-gray-500"></i>
                    </summary>
                    <div class="px-4 sm:px-6 pb-5 text-gray-600 text-sm sm:text-base">
                        Escr칤benos por WhatsApp lo antes posible con tu n칰mero de orden. Si a칰n no iniciamos la preparaci칩n, podremos cancelarlo o reprogramarlo.
                    </div>
                </details>

                <details class="group">
                    <summary class="cursor-pointer select-none py-4 px-4 sm:px-6 flex items-center justify-between">
                        <span class="text-base sm:text-lg text-gray-800 font-medium">Seguimiento del estado de mi pedido</span>
                        <i class="faq-chevron fas fa-chevron-down text-gray-500"></i>
                    </summary>
                    <div class="px-4 sm:px-6 pb-5 text-gray-600 text-sm sm:text-base">
                        Conserva tu n칰mero de orden. Podr치s consultar el estado por WhatsApp o desde este enlace <a href="tuenvio.html" class="text-blue-600 underline">aqu칤</a>. Tiempo estimado: 2535 min zona 1, 3545 min zona 2.
                    </div>
                </details>

                <details class="group">
                    <summary class="cursor-pointer select-none py-4 px-4 sm:px-6 flex items-center justify-between">
                        <span class="text-base sm:text-lg text-gray-800 font-medium">Mi pedido no lleg칩 como esperaba</span>
                        <i class="faq-chevron fas fa-chevron-down text-gray-500"></i>
                    </summary>
                    <div class="px-4 sm:px-6 pb-5 text-gray-600 text-sm sm:text-base">
                        Queremos que ames tu comida. Rep칩rtalo en menos de 15 minutos tras recibirlo y comp치rtenos fotos o detalles; encontraremos la mejor soluci칩n.
                    </div>
                </details>

                <details class="group">
                    <summary class="cursor-pointer select-none py-4 px-4 sm:px-6 flex items-center justify-between">
                        <span class="text-base sm:text-lg text-gray-800 font-medium">Mi tarjeta ha sido rechazada</span>
                        <i class="faq-chevron fas fa-chevron-down text-gray-500"></i>
                    </summary>
                    <div class="px-4 sm:px-6 pb-5 text-gray-600 text-sm sm:text-base">
                        Verifica fondos, conexi칩n y que tu tarjeta permita compras presenciales. Si persiste, elige Transferencia o Efectivo al recibir.
                    </div>
                </details>

                <details class="group">
                    <summary class="cursor-pointer select-none py-4 px-4 sm:px-6 flex items-center justify-between">
                        <span class="text-base sm:text-lg text-gray-800 font-medium">Confirmaci칩n de compra</span>
                        <i class="faq-chevron fas fa-chevron-down text-gray-500"></i>
                    </summary>
                    <div class="px-4 sm:px-6 pb-5 text-gray-600 text-sm sm:text-base">
                        Te mostraremos en pantalla tu n칰mero de orden y lo enviaremos por WhatsApp si lo solicitas. 칔salo para cualquier consulta o seguimiento.
                    </div>
                </details>
            </div>
        </div>
    </section>

    <footer class="bg-gradient-to-r from-gray-900 to-gray-800 text-white py-12">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center">
                <div class="flex items-center justify-center space-x-4 mb-6">
                    <div class="w-12 h-12 bg-gradient-to-br from-yellow-400 to-yellow-600 rounded-xl flex items-center justify-center shadow-lg">
                        <i class="fas fa-hamburger text-white text-xl"></i>
                    </div>
                    <div>
                        <h3 class="text-2xl font-bold font-poppins">
                            SR & SRA <span class="text-transparent bg-clip-text bg-gradient-to-r from-yellow-300 to-orange-400">BURGER</span>
                        </h3>
                        <p class="text-gray-400 text-sm">Minatitl치n, Veracruz</p>
                    </div>
                </div>
                <div class="border-t border-gray-700 pt-6">
                    <p class="text-gray-400">
                        춸 <span id="year"></span> Sr. y Sra. Burger. Todos los derechos reservados. 
                        <span class="text-yellow-400">Hecho con 仇벒잺 para ti.</span>
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Sticky cart (m칩vil) -->
    <div id="sticky-cart-bar" class="fixed bottom-0 left-0 right-0 md:hidden z-40 hidden">
        <div class="mx-auto max-w-3xl px-4 pt-3 pb-[calc(env(safe-area-inset-bottom,0px)+0.75rem)]">
            <div class="bg-white/95 dark:bg-gray-900/95 backdrop-blur border border-gray-200 dark:border-white/10 rounded-2xl shadow-lg flex items-center justify-between gap-3 p-3">
                <div class="min-w-0">
                    <div class="text-sm font-semibold text-gray-900 dark:text-gray-100">Tu carrito</div>
                    <div class="text-xs text-gray-600 dark:text-gray-300 truncate">
                        <span id="sticky-cart-items">0</span> art칤culos 췅 <span id="sticky-cart-total">$0</span>
                    </div>
                </div>
                <button id="sticky-cart-open" type="button" class="btn-primary px-4 py-2 text-sm font-bold" aria-label="Abrir carrito">
                    Ver
                </button>
            </div>
        </div>
    </div>

    <div id="cart-sidebar" class="cart-sidebar fixed top-0 right-0 h-full w-full md:w-96 bg-white shadow-2xl transform translate-x-full transition-transform duration-300 ease-in-out z-50 flex flex-col">
        <div class="cart-header flex items-center justify-between p-4 border-b">
            <div class="min-w-0">
                <h3 class="text-xl font-bold font-poppins truncate">Tu Pedido</h3>
                <p class="text-xs text-gray-600">Revisa y confirma</p>
            </div>
            <button id="close-cart-btn" class="cart-close text-gray-500 hover:text-gray-800">
                <i class="fas fa-times text-2xl"></i>
            </button>
        </div>
        <div id="cart-items" class="cart-items flex-grow p-4 overflow-y-auto modal-scrollbar">
            <div id="cart-empty-msg" class="text-center mt-10 text-gray-700">
                <p class="text-lg font-bold">Tu carrito est치 vac칤o</p>
                <p class="text-sm text-gray-600 mt-1">Agrega algo del men칰 para empezar tu pedido.</p>
                <button id="cart-empty-cta" type="button" class="btn-primary mt-5 px-6 py-3 font-bold" aria-label="Explorar combos">
                    Explorar combos
                </button>
                <p class="text-xs text-gray-500 mt-3">Tip: puedes personalizar toppings en cada producto.</p>
            </div>
        </div>
        <div class="cart-footer p-4 border-t bg-gray-50">
            <div class="flex justify-between items-center mb-4">
                <span class="text-lg font-semibold">Total:</span>
                <span id="cart-total" class="text-2xl font-bold text-[#FFB300]">$0.00</span>
            </div>
            <button id="open-customers-page-btn" type="button" class="w-full mb-2 bg-slate-800 text-white font-bold py-2 rounded-xl hover:bg-slate-700 transition duration-300">
                <i class="fas fa-address-book mr-2"></i>Clientes
            </button>
            <button id="checkout-btn" class="w-full bg-[#FFB300] text-[#212121] font-bold py-3 rounded-xl hover:bg-[#FFA000] transition duration-300 disabled:bg-gray-400 disabled:cursor-not-allowed">
                <i class="fas fa-receipt mr-2"></i>Finalizar Pedido
            </button>
        </div>
    </div>
    <div id="cart-overlay" class="fixed top-0 left-0 w-full h-full bg-black/50 z-40 hidden"></div>

    <!-- Modal: Seleccionar cliente (Firebase) -->
    <div id="customer-picker-modal" class="fixed inset-0 bg-black/60 z-[70] hidden items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-xl w-full max-w-lg mx-auto flex flex-col" style="max-height: 90vh;">
            <div class="p-4 border-b flex items-center justify-between gap-2">
                <div class="min-w-0">
                    <div class="text-lg font-bold font-poppins truncate">Seleccionar cliente</div>
                    <div class="text-xs text-gray-600 truncate">Se sincroniza desde Firebase</div>
                </div>
                <button id="customer-picker-close" type="button" class="text-gray-500 hover:text-gray-900">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <div class="p-4 space-y-3 overflow-y-auto modal-scrollbar">
                <div class="flex gap-2">
                    <div class="relative flex-1">
                        <i class="fas fa-search text-gray-400 absolute left-3 top-1/2 -translate-y-1/2"></i>
                        <input id="customer-picker-search" type="text" class="w-full pl-9 pr-3 py-2 border rounded-xl text-sm" placeholder="Buscar por nombre o tel칠fono" />
                    </div>
                    <button id="customer-picker-refresh" type="button" class="px-3 py-2 rounded-xl bg-slate-800 text-white text-sm font-semibold hover:bg-slate-700">
                        <i class="fas fa-rotate"></i>
                    </button>
                </div>
                <div id="customer-picker-empty" class="text-sm text-gray-600 py-6 text-center hidden">No hay clientes guardados.</div>
                <div id="customer-picker-list" class="space-y-2"></div>
            </div>
            <div class="p-4 border-t bg-gray-50">
                <button id="customer-picker-add" type="button" class="w-full bg-yellow-500 text-slate-900 font-extrabold py-3 rounded-xl hover:bg-yellow-400">
                    <i class="fas fa-user-plus mr-2"></i>Agregar cliente
                </button>
            </div>
        </div>
    </div>

    <!-- Modal: Agregar cliente r치pido (Firebase manual_customers) -->
    <div id="customer-add-modal" class="fixed inset-0 bg-black/60 z-[75] hidden items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-xl w-full max-w-lg mx-auto flex flex-col" style="max-height: 90vh;">
            <div class="p-4 border-b flex items-center justify-between gap-2">
                <div class="min-w-0">
                    <div class="text-lg font-bold font-poppins truncate">Agregar cliente</div>
                    <div class="text-xs text-gray-600 truncate">Se guardar치 en la lista de clientes r치pidos</div>
                </div>
                <button id="customer-add-close" type="button" class="text-gray-500 hover:text-gray-900">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <div class="p-4 space-y-3 overflow-y-auto modal-scrollbar">
                <div>
                    <label for="customer-add-name" class="block text-sm font-medium mb-1">Nombre completo *</label>
                    <input id="customer-add-name" type="text" class="w-full px-3 py-2 border rounded-xl text-sm focus:ring-yellow-300 focus:border-yellow-400" placeholder="Nombre del cliente" />
                    <div id="customer-add-name-error" class="mt-1 text-xs text-red-600 hidden"></div>
                </div>
                <div>
                    <label for="customer-add-phone" class="block text-sm font-medium mb-1">Tel칠fono (opcional)</label>
                    <input id="customer-add-phone" type="tel" class="w-full px-3 py-2 border rounded-xl text-sm focus:ring-yellow-300 focus:border-yellow-400" placeholder="922 123 4567" />
                    <div id="customer-add-phone-error" class="mt-1 text-xs text-red-600 hidden"></div>
                </div>
                <div>
                    <label for="customer-add-address" class="block text-sm font-medium mb-1">Direcci칩n *</label>
                    <textarea id="customer-add-address" rows="3" class="w-full px-3 py-2 border rounded-xl text-sm focus:ring-yellow-300 focus:border-yellow-400 resize-none" placeholder="Calle, n칰mero, colonia, referencias..."></textarea>
                    <div id="customer-add-address-error" class="mt-1 text-xs text-red-600 hidden"></div>
                </div>
            </div>
            <div class="p-4 border-t bg-gray-50 flex flex-col gap-2">
                <button id="customer-add-save" type="button" class="w-full bg-yellow-500 text-slate-900 font-extrabold py-3 rounded-xl hover:bg-yellow-400">
                    <i class="fas fa-save mr-2"></i>Guardar cliente
                </button>
                <button id="customer-add-cancel" type="button" class="w-full text-center text-gray-600 text-sm hover:text-black">Cancelar</button>
            </div>
        </div>
    </div>

    <div id="combo-modal" class="fixed inset-0 bg-black/70 backdrop-blur-sm z-50 hidden items-center justify-center p-4">
        <div class="combo-modal-card glass-effect rounded-2xl shadow-xl w-full max-w-lg mx-auto flex flex-col" style="max-height: 90vh;">
            <div class="p-4 border-b"><h3 id="combo-modal-title" class="text-2xl font-bold font-poppins text-center">Configura tu Combo</h3></div>
            <div id="combo-modal-body" class="p-6 overflow-y-auto modal-scrollbar space-y-6"></div>
            <div class="p-4 border-t mt-auto">
                 <div class="flex justify-between items-center mb-4"><span class="text-lg font-semibold">Total del Combo:</span><span id="combo-modal-total" class="text-2xl font-bold text-[#FFB300]">$0.00</span></div>
                <button id="add-combo-to-cart-btn" class="w-full bg-[#FFB300] text-[#212121] font-bold py-3 rounded-xl hover:bg-[#FFA000] transition duration-300">Agregar Combo al Carrito</button>
                <button id="close-combo-modal-btn" class="w-full text-center mt-2">Cancelar</button>
            </div>
        </div>
    </div>

    <div id="customization-modal" class="fixed inset-0 bg-black/60 backdrop-blur-sm z-[60] hidden items-center justify-center p-3 sm:p-4">
        <div class="custom-modal-card glass-effect rounded-2xl shadow-xl w-full max-w-md mx-auto flex flex-col" style="max-height: 90vh;">
            <div class="custom-modal-header p-4 border-b">
                <h3 id="custom-modal-title" class="text-2xl font-bold font-poppins text-center">Personaliza tu Art칤culo</h3>
                <p class="text-xs text-gray-600 text-center mt-1">Elige tus extras y confirma</p>
            </div>
            <div id="custom-modal-body" class="p-4 overflow-y-auto modal-scrollbar">
                <div class="custom-section">
                    <p class="custom-section-title font-semibold mb-3">游댠 Toppings</p>
                    <div id="toppings-container" class="space-y-3"></div>
                </div>

                <div id="custom-notes-divider" class="custom-divider"></div>

                <div id="custom-notes-section" class="custom-section hidden">
                    <p class="custom-section-title font-semibold mb-2">游닇 Especificaciones</p>
                    <p class="text-xs text-gray-500 mb-2">Ejemplo: sin cebolla, poco picante, bien cocida, etc.</p>
                    <textarea
                        id="custom-notes-input"
                        rows="2"
                        maxlength="140"
                        class="w-full border rounded-xl px-3 py-2 text-sm focus:ring-[#FFB300] focus:border-[#FFB300] resize-none bg-white text-black dark:bg-black dark:text-white dark:border-gray-700"
                        placeholder="Escribe aqu칤 indicaciones especiales solo para este producto"></textarea>
                </div>

                <div class="custom-divider"></div>

                <div class="custom-section">
                    <p class="custom-section-title font-semibold mb-3">游 Acompa침amiento</p>
                    <div id="fries-container" class="space-y-3">
                        <label class="custom-option flex items-center p-3 border rounded-xl cursor-pointer transition-all duration-200">
                            <input type="checkbox" id="add-fries-checkbox" class="form-checkbox h-5 w-5 text-[#FFB300] rounded focus:ring-[#FFA000]">
                            <div class="ml-3 flex-grow min-w-0">
                                <div class="flex items-center justify-between gap-3">
                                    <span class="font-semibold text-gray-800 truncate">游 Agrega papas a tu orden</span>
                                    <span id="fries-price-pill" class="custom-pill text-xs font-bold">+25</span>
                                </div>
                                <div class="text-sm text-gray-600">Elige gajo o a la francesa</div>
                            </div>
                        </label>
                        <div id="fries-choice-container" class="custom-suboptions mt-2 ml-4 pl-4 space-y-2 hidden">
                            <label class="custom-suboption flex items-center cursor-pointer p-3 rounded-xl transition-all duration-200">
                                <input type="radio" name="fries-type" value="Gajo" class="form-radio text-[#FFB300]" checked>
                                <span class="ml-3 font-medium">Papas Gajo</span>
                            </label>
                            <label class="custom-suboption flex items-center cursor-pointer p-3 rounded-xl transition-all duration-200">
                                <input type="radio" name="fries-type" value="Francesas" class="form-radio text-[#FFB300]">
                                <span class="ml-3 font-medium">Papas a la Francesa</span>
                            </label>
                        </div>

                        <label class="custom-option flex items-center p-3 border rounded-xl cursor-pointer transition-all duration-200">
                            <input type="checkbox" id="add-onion-rings-checkbox" class="form-checkbox h-5 w-5 text-[#FFB300] rounded focus:ring-[#FFA000]">
                            <div class="flex-grow min-w-0">
                                <div class="flex items-start justify-between gap-3">
                                    <span class="ml-3 font-semibold text-gray-800">쯊e gustan los aros de cebolla crujientes?</span>
                                    <span class="custom-pill text-xs font-bold">+25</span>
                                </div>
                                <div class="ml-3 text-sm text-gray-600">Solo 25 m치s por 5 piezas doradas</div>
                            </div>
                        </label>
                    </div>
                </div>

                <div class="custom-divider"></div>

                <div class="custom-section">
                    <p class="custom-section-title font-semibold mb-3">游볷 Extras</p>
                    <div id="menu-extras-container" class="space-y-3"></div>
                </div>
            </div>
            <div class="custom-modal-footer p-4 border-t mt-auto">
                <div class="flex justify-between items-center mb-4">
                    <span class="text-lg font-semibold">Total del item:</span>
                    <span id="custom-modal-total" class="text-2xl font-bold text-[#FFB300]">$0.00</span>
                </div>
                <button id="add-custom-to-cart-btn" class="w-full bg-[#FFB300] text-[#212121] font-bold py-3 rounded-xl hover:bg-[#FFA000] transition duration-300">Confirmar Personalizaci칩n</button>
                <button id="close-custom-modal-btn" class="w-full text-center text-gray-600 mt-2 hover:text-black">Cancelar</button>
            </div>
        </div>
    </div>

    <div id="checkout-modal" class="fixed inset-0 bg-black/60 backdrop-blur-sm z-50 hidden items-center justify-center p-2">
        <div class="checkout-card glass-effect rounded-2xl shadow-xl w-full max-w-4xl mx-auto relative flex flex-col overflow-hidden" style="max-height: 95vh;">
            <button id="close-modal-btn" class="checkout-close absolute top-3 right-3 z-10 rounded-full w-9 h-9 flex items-center justify-center">
                <i class="fas fa-times"></i>
            </button>
            
            <!-- Header compacto -->
            <div class="checkout-header p-4 pb-3 border-b">
                <h3 class="text-xl font-bold font-poppins text-center">游멆잺 Pedido Manual (WhatsApp)</h3>
                <p class="text-xs text-gray-600 text-center mt-1">Ingresa los datos del cliente manualmente</p>
            </div>
            
            <!-- Contenido scrolleable -->
            <div class="checkout-body overflow-y-auto modal-scrollbar flex-1 p-4">
                <!-- Resumen del pedido compacto en la parte superior -->
                <div id="order-summary" class="checkout-summary mb-4 p-3 bg-white/60 backdrop-blur-md rounded-xl border"></div>
                
                <!-- Layout en dos columnas para mejor uso del espacio -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
                    <!-- Columna izquierda: Informaci칩n del cliente y entrega -->
                    <div class="space-y-4">
                        <!-- Informaci칩n del cliente -->
                        <div class="checkout-panel p-3 rounded-xl border bg-white/70">
                            <h4 class="font-semibold text-base flex items-center justify-between gap-2 mb-3">
                                <span class="flex items-center">
                                    <i class="fas fa-user text-blue-600 mr-2"></i>Informaci칩n del Cliente
                                </span>
                                <span class="flex items-center gap-2">
                                    <button id="open-customer-picker-btn" type="button" class="px-3 py-1.5 rounded-lg bg-slate-800 text-white text-xs font-semibold hover:bg-slate-700">
                                        <i class="fas fa-address-book mr-1"></i>Cliente
                                    </button>
                                    <button id="open-customers-page-btn2" type="button" class="w-9 h-9 rounded-lg bg-yellow-500 text-slate-900 font-black hover:bg-yellow-400" title="Agregar cliente">
                                        +
                                    </button>
                                </span>
                            </h4>
                            <div class="space-y-3">
                                <div>
                                    <label for="customer-name" class="block text-sm font-medium mb-1">Nombre:</label>
                                    <input type="text" id="customer-name" placeholder="Tu nombre completo" class="w-full p-2 border rounded-md text-sm focus:ring-1 focus:ring-yellow-300 focus:border-yellow-400">
                                    <div id="customer-name-error" class="mt-1 text-xs text-red-600 hidden"></div>
                                </div>
                                <div>
                                    <label for="customer-phone" class="block text-sm font-medium mb-1">Tel칠fono:</label>
                                    <input type="tel" id="customer-phone" placeholder="922 123 4567" class="w-full p-2 border rounded-md text-sm focus:ring-1 focus:ring-yellow-300 focus:border-yellow-400">
                                    <div id="customer-phone-error" class="mt-1 text-xs text-red-600 hidden"></div>
                                </div>
                            </div>
                        </div>
                        <!-- Tipo de entrega -->
                        <div class="checkout-panel p-3 rounded-xl border bg-white/70">
                            <h4 class="font-semibold text-base flex items-center mb-3">
                                <i class="fas fa-truck text-orange-600 mr-2"></i>Tipo de entrega
                            </h4>
                            <div class="space-y-2">
                                <label class="checkout-option flex items-center p-2 border-2 rounded-xl cursor-pointer hover:bg-white/60 transition-all duration-200 border-green-300 bg-green-50/40 backdrop-blur-md">
                                    <input type="radio" name="delivery-type" value="pickup" class="form-radio text-[#FFB300]" checked>
                                    <div class="ml-2 flex-1">
                                        <div class="font-medium text-gray-800 text-sm">游낅 Recoger en local</div>
                                        <div class="text-xs text-green-600 font-semibold">Gratis</div>
                                    </div>
                                </label>
                                <label class="checkout-option flex items-center p-2 border-2 rounded-xl cursor-pointer hover:bg-white/60 transition-all duration-200 bg-white/40 backdrop-blur-md">
                                    <input type="radio" name="delivery-type" value="delivery" class="form-radio text-[#FFB300]">
                                    <div class="ml-2 flex-1">
                                        <div class="font-medium text-gray-800 text-sm">游뚱 Env칤o a domicilio</div>
                                        <div id="delivery-option-fee" class="text-xs text-[#FFB300] font-semibold">Ingresa manualmente</div>
                                    </div>
                                </label>
                            </div>
                        </div>
                        <!-- Direcci칩n Manual (cuando se selecciona delivery) -->
                        <div id="location-section" class="checkout-panel hidden p-3 rounded-xl border bg-white/70">
                            <h4 class="font-semibold text-base flex items-center mb-3">
                                <i class="fas fa-map-marker-alt text-red-600 mr-2"></i>Direcci칩n de Entrega
                            </h4>
                            <div class="space-y-3">
                                <div>
                                    <label for="manual-address" class="block text-sm font-medium mb-1">Direcci칩n completa:</label>
                                    <textarea id="manual-address" rows="3" placeholder="Calle, n칰mero, colonia, referencias..." class="w-full p-2 border rounded-md text-sm focus:ring-1 focus:ring-yellow-300 focus:border-yellow-400 bg-white"></textarea>
                                    <div id="manual-address-error" class="mt-1 text-xs text-red-600 hidden"></div>
                                </div>
                                <div>
                                    <label for="manual-delivery-cost" class="block text-sm font-medium mb-1">Costo de env칤o (ingresa manualmente):</label>
                                    <div class="flex items-center gap-2">
                                        <span class="text-lg font-bold text-gray-700">$</span>
                                        <input type="number" id="manual-delivery-cost" placeholder="0" min="0" step="1" value="0" class="flex-1 p-2 border rounded-md text-sm focus:ring-1 focus:ring-yellow-300 focus:border-yellow-400 bg-white">
                                    </div>
                                    <p class="text-xs text-gray-600 mt-1">
                                        <i class="fas fa-info-circle mr-1"></i>
                                        Ingresa el costo de env칤o que calculaste ($8/km, m치x 12km)
                                    </p>
                                    <div id="manual-delivery-cost-error" class="mt-1 text-xs text-red-600 hidden"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Columna derecha: Resumen y pago -->
                    <div class="space-y-4">
                        <!-- Resumen del pedido -->
                        <div class="checkout-panel p-3 bg-white/70 rounded-xl border shadow-sm">
                            <h4 class="font-semibold text-base mb-2 text-gray-800 flex items-center">
                                <i class="fas fa-receipt mr-2 text-yellow-600"></i>
                                Resumen
                            </h4>
                            <div class="space-y-1 text-sm">
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-600">Subtotal:</span>
                                    <span id="checkout-subtotal" class="font-semibold">$0.00</span>
                                </div>
                                
                                <!-- Secci칩n de descuento manual -->
                                <div class="border rounded-lg p-2 bg-yellow-50/50">
                                    <div class="flex items-center gap-2 mb-2">
                                        <label for="manual-discount-input" class="text-xs font-medium text-gray-700 flex-shrink-0">
                                            <i class="fas fa-tag text-yellow-600 mr-1"></i>Descuento:
                                        </label>
                                        <span class="text-xs text-gray-500">$</span>
                                        <input 
                                            type="number" 
                                            id="manual-discount-input" 
                                            placeholder="0.00" 
                                            min="0" 
                                            step="10" 
                                            class="w-24 px-2 py-1 border rounded text-xs focus:ring-1 focus:ring-yellow-300"
                                        >
                                        <button 
                                            id="apply-discount-btn" 
                                            class="ml-auto px-3 py-1 bg-yellow-500 hover:bg-yellow-600 text-white text-xs rounded-md transition-colors duration-200 font-medium"
                                        >
                                            Aplicar
                                        </button>
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <label for="manual-discount-reason" class="text-xs font-medium text-gray-700 flex-shrink-0">
                                            <i class="fas fa-pen text-yellow-600 mr-1"></i>Raz칩n:
                                        </label>
                                        <input
                                            type="text"
                                            id="manual-discount-reason"
                                            placeholder="Opcional (ej. Cliente frecuente, error, cortes칤a)"
                                            class="flex-1 px-2 py-1 border rounded text-xs focus:ring-1 focus:ring-yellow-300"
                                        >
                                    </div>
                                    <div id="manual-discount-error" class="text-xs text-red-600 hidden"></div>
                                </div>
                                
                                <div id="checkout-discount-row" class="flex justify-between items-center hidden">
                                    <span class="text-gray-600">Descuento:</span>
                                    <span id="checkout-discount" class="font-semibold text-green-600">-$0.00</span>
                                </div>
                                
                                <div id="checkout-delivery-fee" class="flex justify-between items-center hidden">
                                    <span class="text-gray-600">Env칤o:</span>
                                    <span class="font-semibold text-orange-600">+$40.00</span>
                                </div>
                                <div class="border-t pt-1 mt-1">
                                    <div class="flex justify-between items-center">
                                        <span class="font-bold text-gray-800">Total:</span>
                                        <span id="checkout-total" class="text-lg font-bold text-[#FFB300]">$0.00</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- M칠todo de pago -->
                        <div class="checkout-panel p-3 bg-white/70 rounded-xl border">
                            <h4 class="font-semibold text-base mb-2 flex items-center">
                                <i class="fas fa-credit-card mr-2 text-blue-600"></i>
                                M칠todo de pago
                            </h4>
                            <div class="space-y-2">
                                <label class="checkout-option flex items-center p-2 border-2 rounded-xl cursor-pointer hover:bg-white/60 transition-all duration-200 border-yellow-300 bg-yellow-50/40 backdrop-blur-md">
                                    <input type="radio" name="payment" value="Efectivo" class="form-radio text-[#FFB300]" checked>
                                    <div class="ml-2 flex-grow">
                                        <div class="font-medium text-gray-800 text-sm">游눳 Efectivo</div>
                                        <div class="text-xs text-gray-600">Pago al recibir</div>
                                    </div>
                                </label>
                                
                                <!-- Calculadora de cambio compacta -->
                                <div id="cash-amount-container" class="ml-3 p-2 bg-blue-50/35 backdrop-blur-sm border border-blue-200 rounded-lg">
                                    <label for="cash-amount" class="block text-xs font-medium mb-1 text-blue-800">
                                        <i class="fas fa-calculator mr-1"></i>쮺on cu치nto pagar치s?
                                    </label>
                                    <input type="number" id="cash-amount" placeholder="Cantidad..." min="0" step="10" class="w-full p-1 border rounded text-xs focus:ring-1 focus:ring-blue-300">
                                    <div id="cash-amount-error" class="mt-1 text-xs text-red-700 hidden"></div>
                                    
                                    <!-- Display del cambio -->
                                    <div id="change-display" class="mt-1 p-1 bg-green-50/35 backdrop-blur-sm border border-green-200 rounded text-xs hidden">
                                        <div class="flex items-center justify-between">
                                            <span class="text-green-700">
                                                <i class="fas fa-hand-holding-usd mr-1"></i>Cambio:
                                            </span>
                                            <span id="change-amount" class="font-bold text-green-800">$0.00</span>
                                        </div>
                                    </div>
                                    
                                    <!-- Advertencia compacta -->
                                    <div id="insufficient-cash" class="mt-1 p-1 bg-red-50/35 backdrop-blur-sm border border-red-200 rounded text-xs hidden">
                                        <div class="flex items-center text-red-700">
                                            <i class="fas fa-exclamation-triangle mr-1"></i>
                                            <span>Cantidad insuficiente</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <label class="checkout-option flex items-center p-2 border-2 rounded-xl cursor-pointer hover:bg-white/60 transition-all duration-200 bg-white/40 backdrop-blur-md">
                                    <input type="radio" name="payment" value="Tarjeta" class="form-radio text-[#FFB300]">
                                    <div class="ml-2 flex-grow">
                                        <div class="font-medium text-gray-800 text-sm">游눱 Tarjeta</div>
                                        <div class="text-xs text-gray-600">Terminal</div>
                                    </div>
                                </label>
                                
                                <label class="checkout-option flex items-center p-2 border-2 rounded-xl cursor-pointer hover:bg-white/60 transition-all duration-200 bg-white/40 backdrop-blur-md">
                                    <input type="radio" name="payment" value="Transferencia" class="form-radio text-[#FFB300]">
                                    <div class="ml-2 flex-grow">
                                        <div class="font-medium text-gray-800 text-sm">游낁 Transferencia</div>
                                        <div class="text-xs text-gray-600">Bancaria</div>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Footer fijo con bot칩n -->
            <div class="border-t bg-white/60 backdrop-blur-md p-3 rounded-b-lg">
                <div id="checkout-sticky-totals" class="mb-2 flex items-center justify-between text-sm">
                    <div class="text-gray-700">Env칤o: <span id="checkout-sticky-delivery" class="font-semibold"></span></div>
                    <div class="text-gray-800">Total: <span id="checkout-sticky-total" class="font-bold text-[#FFB300]">$0</span></div>
                </div>
                <button id="send-whatsapp-btn" class="hidden w-full bg-green-500 text-white font-bold py-3 rounded-lg hover:bg-green-600 transition duration-300 flex items-center justify-center space-x-2 disabled:bg-gray-400 disabled:cursor-not-allowed shadow-lg">
                    <i class="fas fa-check-circle text-xl"></i><span>Confirmar Pedido</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Modal: registro / bienvenida (solo usuarios SIN sesi칩n) -->
    <div id="register-cta-modal" class="fixed inset-0 bg-black/60 backdrop-blur-sm z-[70] hidden items-center justify-center p-4">
        <div class="glass-effect rounded-2xl shadow-2xl w-full max-w-md mx-auto border border-white/10 bg-slate-950/85 text-slate-100">
            <div class="p-4 border-b flex items-start justify-between gap-3">
                <div>
                    <h3 class="text-2xl sm:text-3xl font-extrabold text-slate-100 leading-tight">游꾸 10% en tu primera compra</h3>
                    <p class="text-base sm:text-lg text-slate-200 mt-1">Solo necesitas crear tu cuenta.</p>
                </div>
                <button id="register-cta-close" class="w-9 h-9 rounded-full bg-white/10 hover:bg-white/15 flex items-center justify-center" aria-label="Cerrar">
                    <i class="fas fa-times text-slate-200"></i>
                </button>
            </div>
            <div class="p-4">
                <div class="p-4 rounded-2xl border border-white/10 bg-white/10">
                    <p class="text-lg font-extrabold text-slate-100">Activa tu descuento en 10 segundos</p>
                    <div class="mt-2 space-y-1 text-sm sm:text-base text-slate-100">
                        <p><span class="font-bold">1)</span> Toca <span class="font-bold">Ir a Mi cuenta</span></p>
                        <p><span class="font-bold">2)</span> Reg칤strate o inicia sesi칩n</p>
                        <p><span class="font-bold">3)</span> Vuelve y se aplicar치 en tu primera compra</p>
                    </div>
                </div>

                <div class="mt-4 grid grid-cols-1 sm:grid-cols-2 gap-2">
                    <a id="register-cta-go" href="cliente.html" class="w-full bg-[#FFB300] text-[#212121] font-extrabold py-3 rounded-xl text-center hover:bg-[#FFA000] transition">
                        Ir a Mi cuenta
                    </a>
                    <button id="register-cta-later" type="button" class="w-full bg-white/10 text-slate-100 font-bold py-3 rounded-xl hover:bg-white/15 transition">
                        Ahora no
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Mapa Grande - RESPONSIVE MEJORADO v8 -->
    <div id="map-modal" class="fixed inset-0 bg-black/80 z-[100] hidden items-center justify-center p-0">
        <!-- Modal m치s peque침o para ver todos los botones -->
        <div class="bg-white w-full max-h-[80vh] sm:max-h-[85vh] sm:max-w-5xl sm:mx-4 sm:rounded-2xl shadow-2xl overflow-hidden flex flex-col">
            <!-- Header del modal - M츼S COMPACTO -->
            <div class="bg-gradient-to-r from-yellow-500 to-orange-500 p-2.5 sm:p-3 flex items-center justify-between flex-shrink-0">
                <div class="flex items-center gap-2">
                    <div class="w-8 h-8 sm:w-9 sm:h-9 bg-white rounded-full flex items-center justify-center">
                        <i class="fas fa-map-marked-alt text-yellow-600 text-sm sm:text-base"></i>
                    </div>
                    <div>
                        <h3 class="text-white font-bold text-sm sm:text-base">쮻칩nde te encuentras?</h3>
                    </div>
                </div>
                <button id="close-map-modal" class="w-8 h-8 sm:w-9 sm:h-9 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center transition-colors touch-manipulation">
                    <i class="fas fa-times text-white text-base sm:text-lg"></i>
                </button>
            </div>
            
            <!-- Buscador - COMPACTO -->
            <div class="p-2.5 sm:p-3 bg-white border-b border-gray-200 flex-shrink-0">
                <div class="relative max-w-2xl mx-auto">
                    <div class="absolute left-3 top-1/2 -translate-y-1/2 w-2.5 h-2.5 bg-black rounded-full"></div>
                    <input id="modal-search-input" 
                        type="text" 
                        placeholder="쮸 d칩nde quieres que lleguemos?"
                        class="w-full pl-8 pr-3 py-2.5 sm:py-3 text-sm sm:text-base bg-gray-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-black transition-all touch-manipulation" 
                        autocomplete="off"
                        style="font-size: 16px;" />
                </div>
                
                <!-- Suggestions dropdown -->
                <div id="modal-suggestions" class="hidden max-w-2xl mx-auto mt-2 bg-white border border-gray-200 rounded-lg shadow-xl max-h-48 overflow-y-auto">
                    <!-- Populated by JS -->
                </div>
            </div>
            
            <!-- Mapa grande - ESTILO UBER/DIDI MEJORADO -->
            <div class="flex-1 relative min-h-0 bg-gray-100">
                <div id="hero-map" class="w-full h-full"></div>
                
                <!-- INDICADOR CENTRAL - SOLO CRUZ ROJA SIMPLE (sin pin) -->
                <div class="absolute inset-0 flex items-center justify-center pointer-events-none z-[5]">
                    <div class="relative flex items-center justify-center">
                        <!-- Cruz simple -->
                        <div class="relative">
                            <!-- C칤rculo rojo central -->
                            <div class="w-4 h-4 bg-red-600 rounded-full border-2 border-white shadow-lg"></div>
                            
                            <!-- L칤neas de la cruz -->
                            <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2">
                                <div class="absolute w-8 h-0.5 bg-red-600" style="left: -16px; top: -1px;"></div>
                                <div class="absolute h-8 w-0.5 bg-red-600" style="top: -16px; left: -1px;"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Bot칩n MI UBICACI칍N flotante - M츼S ARRIBA -->
                <div class="absolute bottom-6 right-3 z-10">
                    <button id="modal-use-geolocation" 
                        class="w-12 h-12 sm:w-14 sm:h-14 bg-white rounded-full shadow-xl flex items-center justify-center hover:bg-gray-50 active:scale-95 transition-all border border-gray-200 touch-manipulation">
                        <i class="fas fa-location-crosshairs text-gray-700 text-lg sm:text-xl"></i>
                    </button>
                </div>
                
                <!-- Botones ZOOM - M츼S ARRIBA -->
                <div class="absolute bottom-20 right-3 z-10 flex flex-col gap-2">
                    <button id="zoom-in" 
                        class="w-10 h-10 sm:w-12 sm:h-12 bg-white rounded-lg shadow-lg flex items-center justify-center hover:bg-gray-50 active:scale-95 transition-all border border-gray-200 touch-manipulation">
                        <i class="fas fa-plus text-gray-700 text-base sm:text-lg"></i>
                    </button>
                    <button id="zoom-out" 
                        class="w-10 h-10 sm:w-12 sm:h-12 bg-white rounded-lg shadow-lg flex items-center justify-center hover:bg-gray-50 active:scale-95 transition-all border border-gray-200 touch-manipulation">
                        <i class="fas fa-minus text-gray-700 text-base sm:text-lg"></i>
                    </button>
                </div>
            </div>
            
            <!-- Footer - COMPACTO -->
            <div class="p-2.5 sm:p-3 bg-white border-t border-gray-200 flex-shrink-0">
                <div class="max-w-2xl mx-auto">
                    
                    <!-- Preview de direcci칩n -->
                    <div id="modal-address-preview" class="mb-2">
                        <div class="flex items-start gap-2 p-2 bg-gray-50 rounded-lg">
                            <div class="w-6 h-6 bg-black rounded flex items-center justify-center flex-shrink-0 mt-0.5">
                                <i class="fas fa-location-dot text-white text-xs"></i>
                            </div>
                            <div class="flex-1 min-w-0">
                                <p id="modal-address-text" class="text-xs sm:text-sm text-gray-900 font-medium leading-snug">
                                    Mueve el mapa para seleccionar
                                </p>
                                <span id="modal-loading-spinner" class="hidden text-xs text-gray-500 mt-1 flex items-center gap-1">
                                    <i class="fas fa-spinner fa-spin"></i>
                                    Buscando...
                                </span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Indicador de disponibilidad -->
                    <div id="modal-availability" class="mb-2 hidden" role="status" aria-live="polite">
                        <!-- Populated by JS -->
                    </div>
                    
                    <!-- Bot칩n de confirmar - COMPACTO -->
                    <button id="modal-confirm-location" 
                        class="w-full px-4 py-2.5 sm:py-3 rounded-lg bg-black text-white font-bold text-sm sm:text-base hover:bg-gray-800 active:scale-98 transition-all disabled:opacity-40 disabled:cursor-not-allowed disabled:bg-gray-300 disabled:text-gray-500 touch-manipulation flex items-center justify-center gap-2" 
                        disabled>
                        <span id="modal-confirm-text">Confirmar ubicaci칩n</span>
                        <i class="fas fa-arrow-right text-sm"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de confirmaci칩n de pedido con n칰mero de orden -->
    <div id="order-success-modal" class="fixed inset-0 bg-black/60 z-[75] hidden items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md mx-auto overflow-hidden">
            <div class="p-6 text-center">
                <div class="w-16 h-16 mx-auto mb-4 rounded-full bg-green-100 flex items-center justify-center">
                    <i class="fas fa-check text-green-600 text-2xl"></i>
                </div>
                <h3 class="text-2xl font-bold mb-2">춰Orden recibida!</h3>
                <p class="text-gray-600">Guarda tu n칰mero de orden para rastrear tu pedido:</p>
                <div class="mt-3 flex items-center justify-center space-x-2">
                    <span class="text-xl font-black text-gray-900">#<span id="order-number-display"></span></span>
                    <button id="copy-order-number" class="px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg"><i class="fas fa-copy"></i></button>
                </div>
                <a id="track-order-link" href="tuenvio.html" class="mt-4 inline-flex items-center justify-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-bold">
                    <i class="fas fa-location-dot mr-2"></i> RASTREA TU PEDIDO
                </a>
            </div>
            <div class="p-4 bg-gray-50">
                <button id="close-order-success" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded-lg transition">Cerrar</button>
            </div>
        </div>
    </div>

    <!-- Bot칩n flotante de ayuda optimizado para m칩vil -->
    <button id="help-btn" class="fixed bottom-4 sm:bottom-20 right-4 sm:right-6 bg-gradient-to-br from-yellow-400 to-orange-500 text-white rounded-2xl w-14 h-14 sm:w-16 sm:h-16 flex items-center justify-center shadow-2xl hover:shadow-3xl hover:scale-110 transition-all duration-300 z-40 group">
        <i class="fas fa-question text-xl sm:text-2xl group-hover:scale-110 transition-transform duration-300"></i>
        <div class="absolute -left-12 sm:-left-16 top-1/2 transform -translate-y-1/2 bg-gray-900 text-white px-3 py-1 rounded-lg text-xs sm:text-sm opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap hidden sm:block">
            쮸yuda?
        </div>
    </button>

    <!-- Duplicado eliminado; ver modal anterior -->

    <!-- Modal de promociones - Dise침o Premium Competitivo Mundial -->
    <div id="promotions-modal" class="fixed inset-0 bg-black/80 backdrop-blur-sm z-[70] hidden items-center justify-center p-2 sm:p-4">
        <div class="promotions-modal-panel bg-white/90 dark:bg-gray-900/90 backdrop-blur-xl border border-white/10 dark:border-white/5 rounded-3xl shadow-2xl w-full max-w-7xl mx-auto flex flex-col relative overflow-hidden" style="max-height: 95vh;">
            <!-- Header Premium con gradiente din치mico -->
            <div class="relative p-4 sm:p-6 lg:p-8 bg-gradient-to-r from-red-600 via-orange-500 to-yellow-500 text-white overflow-hidden">
                <!-- Elementos decorativos animados -->
                <div class="absolute top-0 left-0 w-full h-full">
                    <div class="absolute top-4 left-8 w-16 h-16 bg-white/10 rounded-full animate-pulse hidden sm:block"></div>
                    <div class="absolute top-12 right-12 w-8 h-8 bg-white/20 rounded-full animate-bounce hidden sm:block"></div>
                    <div class="absolute bottom-4 left-1/4 w-12 h-12 bg-white/15 rounded-full animate-pulse hidden sm:block" style="animation-delay: 1s;"></div>
                    <div class="absolute bottom-8 right-1/3 w-6 h-6 bg-white/25 rounded-full animate-bounce hidden sm:block" style="animation-delay: 0.5s;"></div>
                </div>
                
                <div class="relative z-10 flex justify-between items-center">
                    <div class="flex items-center space-x-2 sm:space-x-4">
                        <div class="bg-white/20 backdrop-blur-sm rounded-xl sm:rounded-2xl p-2 sm:p-3 animate-wiggle">
                            <i class="fas fa-fire text-xl sm:text-3xl lg:text-4xl"></i>
                        </div>
                        <div>
                            <h3 class="text-lg sm:text-2xl lg:text-4xl font-black font-poppins tracking-tight">OFERTAS EXCLUSIVAS</h3>
                            <p class="text-white/90 text-xs sm:text-sm lg:text-lg font-medium">춰Promociones que te har치n volver por m치s!</p>
                        </div>
                    </div>
                    <button id="close-promotions-modal-btn" class="bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-full p-2 sm:p-3 transition-all duration-300 hover:scale-110">
                        <i class="fas fa-times text-lg sm:text-xl lg:text-2xl"></i>
                    </button>
                </div>
            </div>

            <!-- Contenido principal con scroll suave -->
            <div class="flex-1 overflow-y-auto modal-scrollbar bg-gradient-to-b from-gray-50 to-white">
                
                <!-- Promociones principales - Layout optimizado para m칩vil -->
                <div class="p-3 sm:p-6 lg:p-8">
                    
                    <!-- Mobile: Navegaci칩n por tabs / Desktop: Grid completo -->
                    <div class="md:hidden mb-6">
                        <!-- Tabs para m칩vil (solo promos diarias y fin de semana) -->
                        <div class="flex space-x-2 overflow-x-auto pb-2 mb-4">
                            <button onclick="showMobilePromo('daily')" class="mobile-promo-tab active flex-shrink-0 bg-gradient-to-r from-red-500 to-orange-500 text-white px-4 py-2 rounded-full text-sm font-bold">
                                游늰 Diarias
                            </button>
                            <button onclick="showMobilePromo('weekend')" class="mobile-promo-tab flex-shrink-0 bg-gray-200 text-gray-700 px-4 py-2 rounded-full text-sm font-bold">
                                游꿀 Fin de Semana
                            </button>
                        </div>
                        
                        <!-- Contenido por tabs para m칩vil -->
                        <div id="mobile-daily-promos" class="mobile-promo-content">
                            <div class="space-y-4">
                                <!-- Promoci칩n destacada del d칤a (din치mico) -->
                                <div id="mobile-daily-promo-card" class="bg-gradient-to-r from-blue-600 to-blue-800 rounded-2xl p-4 text-white relative overflow-hidden">
                                    <div id="mobile-today-badge" class="absolute top-2 right-2 bg-yellow-400 text-blue-900 px-2 py-1 rounded-full text-xs font-black">HOY</div>
                                    <div class="flex items-center space-x-3">
                                        <div class="w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center">
                                            <i class="fas fa-calendar-day text-xl"></i>
                                        </div>
                                        <div class="flex-1">
                                            <h4 id="mobile-current-day" class="text-sm font-bold text-blue-200">VIERNES</h4>
                                            <h3 id="mobile-current-promo-title" class="text-lg font-black">CARNE SUPREMA</h3>
                                            <div class="flex items-center space-x-2">
                                                <span id="mobile-current-promo-discount" class="text-xl font-black text-yellow-300">Carne extra</span>
                                                <span id="mobile-current-promo-desc" class="text-sm text-blue-100">Por solo +$10</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Lista compacta de promociones diarias (martes-jueves) -->
                                <div class="grid grid-cols-1 gap-3">
                                    <div class="promo-compact-card bg-white border border-gray-200 rounded-xl p-3 flex items-center space-x-3">
                                        <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                                            <i class="fas fa-hotdog text-blue-600"></i>
                                        </div>
                                        <div class="flex-1">
                                            <h4 class="font-bold text-gray-900">Martes Hotdog Mania</h4>
                                            <p class="text-sm text-gray-600">20% descuento en hotdogs</p>
                                        </div>
                                        <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-bold">MARTES</span>
                                    </div>
                                    
                                    <div class="promo-compact-card bg-white border border-gray-200 rounded-xl p-3 flex items-center space-x-3">
                                        <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center">
                                            <i class="fas fa-hamburger text-green-600"></i>
                                        </div>
                                        <div class="flex-1">
                                            <h4 class="font-bold text-gray-900">Mi칠rcoles BBQ BEACON CRUNCH</h4>
                                            <p class="text-sm text-gray-600">Precio 칰nico $100</p>
                                        </div>
                                        <span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-bold">MI칄RCOLES</span>
                                    </div>
                                    
                                    <div class="promo-compact-card bg-white border border-gray-200 rounded-xl p-3 flex items-center space-x-3">
                                        <div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center">
                                            <i class="fas fa-gift text-purple-600"></i>
                                        </div>
                                        <div class="flex-1">
                                            <h4 class="font-bold text-gray-900">Papas Gratis</h4>
                                            <p class="text-sm text-gray-600">Compra hamburguesa o hotdog y ll칠vate papas gratis</p>
                                        </div>
                                        <span class="bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-xs font-bold">JUEVES</span>
                                    </div>
                                    
                                </div>
                            </div>
                        </div>
                        
                        <!-- Secci칩n de combos en m칩vil eliminada: ahora solo se muestran promos diarias y mensaje de fines de semana -->
                        
                        <div id="mobile-weekend-promos" class="mobile-promo-content hidden">
                            <div class="space-y-4">
                                <div class="bg-gradient-to-r from-gray-500 to-gray-700 rounded-2xl p-4 text-white">
                                    <div class="text-center">
                                        <h3 class="text-xl font-black mb-2">游늰 FINES DE SEMANA</h3>
                                        <p class="text-gray-200 mb-3">Men칰 completo a precio normal</p>
                                        <div class="bg-white/20 backdrop-blur-sm rounded-lg p-3">
                                            <h4 class="font-bold mb-1">Sin promociones especiales</h4>
                                            <p class="text-sm">Disfruta nuestro men칰 completo</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="bg-white border border-gray-200 rounded-xl p-4 text-center">
                                    <h4 class="font-bold text-gray-900 mb-2">涌 CALIDAD TODOS LOS D칈AS</h4>
                                    <p class="text-gray-600 text-sm mb-3">Los fines de semana mantenemos nuestros precios est치ndar</p>
                                    <div class="bg-blue-100 text-blue-800 px-3 py-2 rounded-lg text-sm font-bold">
                                        Mismo sabor, mismo precio justo
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Grid completo para desktop (hidden en m칩vil) -->
                    <div class="hidden md:grid md:grid-cols-2 xl:grid-cols-4 gap-4 lg:gap-6 mb-8">
                        
                        <!-- PROMOCI칍N DEL D칈A ACTUAL - Dise침o ultra-premium din치mico -->
                        <div id="desktop-daily-promo-card" class="group relative overflow-hidden rounded-2xl bg-gradient-to-br from-blue-600 to-blue-800 text-white shadow-xl hover:shadow-2xl transition-all duration-500 transform hover:scale-105">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"></div>
                            <div id="desktop-today-badge" class="absolute top-4 right-4 bg-yellow-400 text-blue-900 px-3 py-1 rounded-full text-xs font-black animate-pulse">
                                HOY
                            </div>
                            <div class="relative p-6 text-center">
                                <div class="mb-4">
                                    <div class="w-16 h-16 mx-auto bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center mb-3 group-hover:scale-110 transition-transform duration-300">
                                        <i class="fas fa-calendar-day text-2xl"></i>
                                    </div>
                                    <h4 id="desktop-current-day" class="text-sm font-bold text-blue-200 mb-1">VIERNES</h4>
                                    <h3 id="desktop-current-promo-title" class="text-xl font-black mb-2">CARNE SUPREMA</h3>
                                </div>
                                <div class="space-y-2 mb-4">
                                    <div id="desktop-current-promo-discount" class="text-3xl font-black text-yellow-300">Carne extra</div>
                                    <p id="desktop-current-promo-desc" class="text-sm text-blue-100">Por solo +$10</p>
                                </div>
                                <div class="bg-white/20 backdrop-blur-sm px-4 py-2 rounded-xl text-xs font-bold">
                                    Promoci칩n Especial
                                </div>
                            </div>
                        </div>

                        <!-- MARTES - HOTDOG MANIA -->
                        <div class="group relative overflow-hidden rounded-2xl bg-gradient-to-br from-blue-600 to-blue-800 text-white shadow-xl hover:shadow-2xl transition-all duration-500 transform hover:scale-105">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"></div>
                            <div class="absolute top-4 right-4 bg-yellow-400 text-blue-900 px-3 py-1 rounded-full text-xs font-black animate-pulse">
                                20% OFF
                            </div>
                            <div class="relative p-6 text-center">
                                <div class="mb-4">
                                    <div class="w-16 h-16 mx-auto bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center mb-3 group-hover:scale-110 transition-transform duration-300">
                                        <i class="fas fa-hotdog text-2xl"></i>
                                    </div>
                                    <h4 class="text-sm font-bold text-blue-200 mb-1">MARTES</h4>
                                    <h3 class="text-xl font-black mb-2">HOTDOG MANIA</h3>
                                </div>
                                <div class="space-y-2 mb-4">
                                    <div class="text-3xl font-black text-yellow-300">20% OFF</div>
                                    <p class="text-sm text-blue-100">En todos los hotdogs</p>
                                </div>
                                <div class="bg-white/20 backdrop-blur-sm px-4 py-2 rounded-xl text-xs font-bold">
                                    Martes de Hotdogs
                                </div>
                            </div>
                        </div>

                        <!-- MI칄RCOLES -->
                        <div class="group relative overflow-hidden rounded-2xl bg-gradient-to-br from-green-600 to-emerald-800 text-white shadow-xl hover:shadow-2xl transition-all duration-500 transform hover:scale-105">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"></div>
                            <div class="absolute top-4 right-4 bg-yellow-400 text-green-900 px-3 py-1 rounded-full text-xs font-black animate-pulse">
                                ESPECIAL
                            </div>
                            <div class="relative p-6 text-center">
                                <div class="mb-4">
                                    <div class="w-16 h-16 mx-auto bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center mb-3 group-hover:scale-110 transition-transform duration-300">
                                        <i class="fas fa-hamburger text-2xl"></i>
                                    </div>
                                    <h4 class="text-sm font-bold text-green-200 mb-1">MI칄RCOLES</h4>
                                    <h3 class="text-xl font-black mb-2">BBQ BEACON CRUNCH</h3>
                                </div>
                                <div class="space-y-2 mb-4">
                                    <div class="text-3xl font-black text-yellow-300">$100</div>
                                    <p class="text-sm text-green-100">Precio 칰nico</p>
                                </div>
                                <div class="bg-white/20 backdrop-blur-sm px-4 py-2 rounded-xl text-xs font-bold">
                                    Mi칠rcoles 칔nicos
                                </div>
                            </div>
                        </div>

                        <!-- JUEVES -->
                        <div class="group relative overflow-hidden rounded-2xl bg-gradient-to-br from-purple-600 to-violet-800 text-white shadow-xl hover:shadow-2xl transition-all duration-500 transform hover:scale-105">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"></div>
                            <div class="absolute top-4 right-4 bg-yellow-400 text-purple-900 px-3 py-1 rounded-full text-xs font-black animate-pulse">
                                GRATIS
                            </div>
                            <div class="relative p-6 text-center">
                                <div class="mb-4">
                                    <div class="w-16 h-16 mx-auto bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center mb-3 group-hover:scale-110 transition-transform duration-300">
                                        <i class="fas fa-gift text-2xl"></i>
                                    </div>
                                    <h4 class="text-sm font-bold text-purple-200 mb-1">JUEVES</h4>
                                    <h3 class="text-lg font-black mb-2">PAPAS GRATIS</h3>
                                </div>
                                <div class="space-y-2 mb-4">
                                    <div class="text-xl font-black text-yellow-300">COMPLEMENTO</div>
                                    <p class="text-sm text-purple-100">Compra una hamburguesa o hotdog y ll칠vate unas papas complemento gratis</p>
                                </div>
                                <div class="bg-white/20 backdrop-blur-sm px-4 py-2 rounded-xl text-xs font-bold">
                                    Jueves de Papas
                                </div>
                            </div>
                        </div>

                    </div>

                    <!-- Secci칩n "Nuestros combos" eliminada del modal de promociones para evitar duplicar ofertas.
                         Los combos siguen estando disponibles en el men칰 principal. -->

                    <!-- Call to Action Final - Dise침o Premium -->
                    <div class="bg-gradient-to-r from-gray-900 to-black rounded-3xl p-6 sm:p-10 text-center relative overflow-hidden">
                        <!-- Efectos visuales de fondo -->
                        <div class="absolute inset-0">
                            <div class="absolute top-8 left-8 w-2 h-2 bg-yellow-400 rounded-full animate-ping"></div>
                            <div class="absolute top-16 right-12 w-1 h-1 bg-white rounded-full animate-pulse"></div>
                            <div class="absolute bottom-12 left-16 w-3 h-3 bg-yellow-400/50 rounded-full animate-bounce"></div>
                            <div class="absolute bottom-8 right-8 w-2 h-2 bg-white/50 rounded-full animate-ping" style="animation-delay: 1s;"></div>
                        </div>
                        
                        <div class="relative z-10">
                            <h2 class="text-2xl sm:text-4xl font-black text-white mb-4">
                                游님 춰S칈GUENOS PARA M츼S OFERTAS!
                            </h2>
                            <p class="text-gray-300 text-lg mb-8 max-w-2xl mx-auto">
                                칔nete a nuestra comunidad y s칠 el primero en conocer promociones exclusivas, nuevos productos y ofertas especiales.
                            </p>
                            
                            <div class="flex flex-wrap justify-center gap-4 mb-8">
                                <a href="https://www.facebook.com/profile.php?id=61570144580225" target="_blank" 
                                   class="group bg-blue-600 hover:bg-blue-700 text-white px-6 py-4 rounded-2xl font-bold transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl flex items-center space-x-3">
                                    <i class="fab fa-facebook text-xl group-hover:scale-110 transition-transform"></i>
                                    <span>Facebook</span>
                                    <div class="bg-blue-500 text-xs px-2 py-1 rounded-full">+500</div>
                                </a>
                                
                                <a href="https://www.instagram.com/srysraburger/" target="_blank" 
                                   class="group bg-gradient-to-r from-pink-500 to-rose-600 hover:from-pink-600 hover:to-rose-700 text-white px-6 py-4 rounded-2xl font-bold transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl flex items-center space-x-3">
                                    <i class="fab fa-instagram text-xl group-hover:scale-110 transition-transform"></i>
                                    <span>Instagram</span>
                                    <div class="bg-pink-400 text-xs px-2 py-1 rounded-full">NEW</div>
                                </a>
                                
                                <a href="https://www.tiktok.com/@srsra.burger" target="_blank" 
                                   class="group bg-black hover:bg-gray-800 text-white px-6 py-4 rounded-2xl font-bold transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl flex items-center space-x-3">
                                    <i class="fab fa-tiktok text-xl group-hover:scale-110 transition-transform"></i>
                                    <span>TikTok</span>
                                    <div class="bg-gray-700 text-xs px-2 py-1 rounded-full">VIRAL</div>
                                </a>
                            </div>
                            
                            <div class="inline-flex items-center bg-yellow-400 text-black px-6 py-3 rounded-2xl font-black text-lg animate-pulse">
                                <i class="fas fa-bell mr-2"></i>
                                춰Activa las notificaciones!
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de ayuda -->
    <div id="help-modal" class="fixed inset-0 bg-black/60 z-[70] hidden items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-lg mx-auto flex flex-col" style="max-height: 90vh;">
            <div class="p-4 border-b flex justify-between items-center">
                <h3 class="text-2xl font-bold font-poppins">쮺칩mo hacer tu pedido?</h3>
                <button id="close-help-modal-btn" class="text-gray-500 hover:text-gray-800">
                    <i class="fas fa-times text-2xl"></i>
                </button>
            </div>
            <div class="p-6 overflow-y-auto modal-scrollbar space-y-4">
                <div class="border-l-4 border-[#FFB300] pl-4 py-2">
                    <h4 class="font-bold text-lg mb-1">Paso 1: Explora nuestro men칰</h4>
                    <p class="text-gray-600">Navega por las diferentes categor칤as y descubre nuestras deliciosas hamburguesas, combos y extras.</p>
                </div>
                
                <div class="border-l-4 border-[#FFB300] pl-4 py-2">
                    <h4 class="font-bold text-lg mb-1">Paso 2: Personaliza tus productos</h4>
                    <p class="text-gray-600">Haz clic en "Personalizar" para a침adir ingredientes extra o acompa침amientos a tus hamburguesas. Para los combos, presiona "Elegir" y selecciona tus hamburguesas favoritas.</p>
                </div>
                
                <div class="border-l-4 border-[#FFB300] pl-4 py-2">
                    <h4 class="font-bold text-lg mb-1">Paso 3: Agrega al carrito</h4>
                    <p class="text-gray-600">Una vez personalizados, a침ade los productos a tu carrito. Puedes ver tu pedido haciendo clic en "Ver Carrito" en la parte superior.</p>
                </div>
                
                <div class="border-l-4 border-[#FFB300] pl-4 py-2">
                    <h4 class="font-bold text-lg mb-1">Paso 4: Finaliza tu pedido</h4>
                    <p class="text-gray-600">Cuando est칠s listo, presiona "Finalizar Pedido" en el carrito y completa la informaci칩n solicitada:</p>
                    <ul class="list-disc ml-6 mt-2 text-gray-600">
                        <li>Tu nombre completo</li>
                        <li>Tu n칰mero de tel칠fono</li>
                        <li>Tipo de entrega: recoger en local o env칤o a domicilio</li>
                        <li>Si eliges env칤o a domicilio, selecciona una direcci칩n guardada (si no tienes, entra a Mi cuenta y gu치rdala)</li>
                        <li>M칠todo de pago preferido</li>
                    </ul>
                </div>
                
                <div class="border-l-4 border-[#FFB300] pl-4 py-2">
                    <h4 class="font-bold text-lg mb-1">Paso 5: Env칤a tu pedido por WhatsApp</h4>
                    <p class="text-gray-600">Finalmente, haz clic en "Enviar Pedido por WhatsApp" y se abrir치 una conversaci칩n con tu pedido listo para enviar. Solo presiona enviar y espera nuestra confirmaci칩n.</p>
                </div>

                <div class="bg-blue-50 p-4 rounded-md mt-6">
                    <h4 class="font-bold text-lg mb-2 flex items-center text-blue-700">
                        <i class="fas fa-info-circle mr-2"></i> Informaci칩n adicional
                    </h4>
                    <ul class="list-disc ml-6 text-blue-700">
                        <li class="mb-1">El 치rea de entrega a domicilio est치 limitada a un m치ximo de 12 km desde nuestra ubicaci칩n en Coahuila 36, 10 de Mayo, Minatitl치n, Veracruz.</li>
                        <li class="mb-1">El costo de env칤o se calcula a $8 por KM (redondeo al entero m치s cercano).</li>
                        <li class="mb-1">Horario de atenci칩n: Lunes a Domingo de 3:00 PM a 12:00 AM.</li>
                        <li>Para cualquier duda adicional, cont치ctanos por WhatsApp o llama al 922 159 3688.</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

        <!-- Firebase Configuration -->
        <script type="module" src="js/firebase-config.js"></script>
        <script>
            // Para entorno local con server.js no forzamos API_BASE; se usar치 same-origin
            // window.__API_BASE = 'https://pagina-v3-actual-copia1.vercel.app';

            // Indicador de sesi칩n en el header ("Mi cuenta")
            (function() {
                function waitForClientManager(cb) {
                    var tries = 0;
                    var maxTries = 50;
                    (function check() {
                        if (window.firebaseClientManager && window.firebaseAuth) {
                            cb(window.firebaseClientManager, window.firebaseAuth);
                        } else if (tries++ < maxTries) {
                            setTimeout(check, 100);
                        }
                    })();
                }

                function setupSessionIndicator(manager, auth) {
                    var indicator = document.getElementById('nav-session-indicator');
                    var accountText = document.getElementById('nav-account-text');
                    if (!indicator || !accountText || !manager || !auth) return;

                    manager.onAuthChange(function(user) {
                        if (user) {
                            var name = user.displayName || '';
                            // Intentar leer el nombre guardado en la colecci칩n clientes
                            if (window.firebaseDb && user.uid) {
                                import('https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore.js')
                                    .then(function(mod) {
                                        var doc = mod.doc, getDoc = mod.getDoc;
                                        return getDoc(doc(window.firebaseDb, 'clientes', user.uid));
                                    })
                                    .then(function(snap) {
                                        if (snap && snap.exists()) {
                                            var data = snap.data() || {};
                                            if (data.nombre) name = data.nombre;
                                        }
                                        indicator.classList.remove('hidden');
                                        indicator.textContent = name ? ('Sesi칩n iniciada: ' + name) : 'Sesi칩n iniciada';
                                    })
                                    .catch(function() {
                                        indicator.classList.remove('hidden');
                                        indicator.textContent = 'Sesi칩n iniciada';
                                    });
                            } else {
                                indicator.classList.remove('hidden');
                                indicator.textContent = 'Sesi칩n iniciada';
                            }
                        } else {
                            indicator.classList.add('hidden');
                            indicator.textContent = 'Sesi칩n iniciada';
                        }
                    });
                }

                document.addEventListener('DOMContentLoaded', function() {
                    waitForClientManager(setupSessionIndicator);
                });
            })();
        </script>

        <!-- Flags de modo manual (deben estar ANTES del script principal) -->
        <script>
            window.__MANUAL_MODE = true;
            window.__MANUAL_FAST_MODE = true;
        </script>
        <script src="js/script.js.backup?v=2026-01-23a"></script>

        <!-- Script personalizado para entrada manual -->
        <script>

            // IMPORTANT: `js/script.js.backup` can call `window.placeOrder()` immediately in manual mode.
            // Define a safe stub right away so clicks during initial load still save the order.
            window.__manualPlaceOrderImpl = null;
            window.__originalPlaceOrderFunction = window.__originalPlaceOrderFunction || window.placeOrder || null;
            window.placeOrder = async function() {
                if (typeof window.__manualPlaceOrderImpl === 'function') {
                    return await window.__manualPlaceOrderImpl();
                }

                const startedAt = Date.now();
                const timeoutMs = 2500;
                while (Date.now() - startedAt < timeoutMs) {
                    await new Promise(r => setTimeout(r, 50));
                    if (typeof window.__manualPlaceOrderImpl === 'function') {
                        return await window.__manualPlaceOrderImpl();
                    }
                }

                alert('El sistema todav칤a est치 cargando. Intenta de nuevo en un momento.');
            };
            
            // Modo manual: actualizar costos cuando cambia el input de env칤o
            // Esperar a que el script principal cargue completamente
            setTimeout(() => {
                console.log('游멆잺 Modo Pedido Manual activado');

                // Si est치 el modo r치pido, retirar secciones que no se usan para capturar pedidos
                try {
                    if (window.__MANUAL_FAST_MODE) {
                        document.querySelectorAll('.hero-bg, #nosotros, #contacto, #faq').forEach(el => {
                            try { el.remove(); } catch (_) {}
                        });
                    }
                } catch (_) {}

                // Clientes (Firebase): selector para rellenar Nombre/Tel칠fono/Direcci칩n
                const openCustomersBtnCart = document.getElementById('open-customers-page-btn');
                const openCustomersBtnCheckout = document.getElementById('open-customers-page-btn2');
                const openPickerBtn = document.getElementById('open-customer-picker-btn');

                const pickerModal = document.getElementById('customer-picker-modal');
                const pickerClose = document.getElementById('customer-picker-close');
                const pickerAdd = document.getElementById('customer-picker-add');
                const pickerRefresh = document.getElementById('customer-picker-refresh');
                const pickerSearch = document.getElementById('customer-picker-search');
                const pickerList = document.getElementById('customer-picker-list');
                const pickerEmpty = document.getElementById('customer-picker-empty');

                const addCustomerModal = document.getElementById('customer-add-modal');
                const addCustomerClose = document.getElementById('customer-add-close');
                const addCustomerCancel = document.getElementById('customer-add-cancel');
                const addCustomerSave = document.getElementById('customer-add-save');
                const addCustomerName = document.getElementById('customer-add-name');
                const addCustomerPhone = document.getElementById('customer-add-phone');
                const addCustomerAddress = document.getElementById('customer-add-address');
                const addCustomerNameError = document.getElementById('customer-add-name-error');
                const addCustomerPhoneError = document.getElementById('customer-add-phone-error');
                const addCustomerAddressError = document.getElementById('customer-add-address-error');

                let pickerCustomers = [];

                function normalizeDigits(v) {
                    return String(v || '').replace(/\D/g, '');
                }

                function resetAddCustomerErrors() {
                    if (addCustomerNameError) { addCustomerNameError.textContent = ''; addCustomerNameError.classList.add('hidden'); }
                    if (addCustomerPhoneError) { addCustomerPhoneError.textContent = ''; addCustomerPhoneError.classList.add('hidden'); }
                    if (addCustomerAddressError) { addCustomerAddressError.textContent = ''; addCustomerAddressError.classList.add('hidden'); }
                }

                function openAddCustomerModal() {
                    if (!addCustomerModal) return;

                    resetAddCustomerErrors();

                    // Prefill con lo que ya est칠 escrito en el checkout
                    const currentNameEl = document.getElementById('customer-name');
                    const currentPhoneEl = document.getElementById('customer-phone');
                    const currentAddrEl = document.getElementById('manual-address');

                    if (addCustomerName) addCustomerName.value = currentNameEl ? currentNameEl.value : '';
                    if (addCustomerPhone) addCustomerPhone.value = currentPhoneEl ? currentPhoneEl.value : '';
                    if (addCustomerAddress) addCustomerAddress.value = currentAddrEl ? currentAddrEl.value : '';

                    addCustomerModal.classList.remove('hidden');
                    addCustomerModal.classList.add('flex');
                    if (addCustomerName) addCustomerName.focus();
                }

                function hideAddCustomerModal() {
                    if (!addCustomerModal) return;
                    addCustomerModal.classList.add('hidden');
                    addCustomerModal.classList.remove('flex');
                }

                if (openCustomersBtnCart) openCustomersBtnCart.addEventListener('click', openAddCustomerModal);
                if (openCustomersBtnCheckout) openCustomersBtnCheckout.addEventListener('click', openAddCustomerModal);

                function showPicker() {
                    if (!pickerModal) return;
                    pickerModal.classList.remove('hidden');
                    pickerModal.classList.add('flex');
                    if (pickerSearch) pickerSearch.value = '';
                    loadPickerCustomers();
                }

                function hidePicker() {
                    if (!pickerModal) return;
                    pickerModal.classList.add('hidden');
                    pickerModal.classList.remove('flex');
                }

                if (pickerClose) pickerClose.addEventListener('click', hidePicker);
                if (pickerAdd) pickerAdd.addEventListener('click', () => {
                    hidePicker();
                    openAddCustomerModal();
                });
                if (pickerRefresh) pickerRefresh.addEventListener('click', () => loadPickerCustomers(true));
                if (openPickerBtn) openPickerBtn.addEventListener('click', showPicker);

                if (pickerModal) {
                    pickerModal.addEventListener('click', (e) => {
                        if (e.target === pickerModal) hidePicker();
                    });
                }

                if (addCustomerModal) {
                    addCustomerModal.addEventListener('click', (e) => {
                        if (e.target === addCustomerModal) hideAddCustomerModal();
                    });
                }

                async function waitForManualCustomerManager(timeoutMs = 6000) {
                    const started = Date.now();
                    while (Date.now() - started < timeoutMs) {
                        if (window.firebaseManualCustomerManager) return window.firebaseManualCustomerManager;
                        await new Promise(r => setTimeout(r, 50));
                    }
                    return null;
                }

                async function saveAddCustomerFromModal() {
                    if (!addCustomerModal || !addCustomerSave) return;

                    resetAddCustomerErrors();

                    const name = addCustomerName ? String(addCustomerName.value || '').trim() : '';
                    const phone = addCustomerPhone ? String(addCustomerPhone.value || '').trim() : '';
                    const address = addCustomerAddress ? String(addCustomerAddress.value || '').trim() : '';

                    let hasError = false;
                    if (!name && addCustomerNameError) {
                        addCustomerNameError.textContent = 'El nombre es obligatorio';
                        addCustomerNameError.classList.remove('hidden');
                        hasError = true;
                    }
                    if (!address && addCustomerAddressError) {
                        addCustomerAddressError.textContent = 'La direcci칩n es obligatoria';
                        addCustomerAddressError.classList.remove('hidden');
                        hasError = true;
                    }

                    if (hasError) return;

                    const mgr = await waitForManualCustomerManager();
                    if (!mgr) {
                        alert('No se pudo conectar con Firebase para guardar el cliente. Intenta de nuevo.');
                        return;
                    }

                    try {
                        addCustomerSave.disabled = true;
                        addCustomerSave.classList.add('opacity-60', 'cursor-wait');

                        await mgr.upsertCustomer({ name, phone, address });

                        // Rellenar autom치ticamente los campos del checkout con el nuevo cliente
                        const checkoutName = document.getElementById('customer-name');
                        const checkoutPhone = document.getElementById('customer-phone');
                        const checkoutAddr = document.getElementById('manual-address');
                        if (checkoutName) checkoutName.value = name;
                        if (checkoutPhone) checkoutPhone.value = phone;
                        if (checkoutAddr) checkoutAddr.value = address;

                        // Recargar el listado del selector
                        loadPickerCustomers(true);

                        hideAddCustomerModal();
                        try { console.log('九 Cliente guardado correctamente en manual_customers'); } catch (_) {}
                    } catch (e) {
                        console.error('No se pudo guardar el cliente manual:', e);
                        let msg = 'No se pudo guardar el cliente. Intenta de nuevo.';
                        if (e && e.message) msg = e.message;
                        alert(msg);
                    } finally {
                        addCustomerSave.disabled = false;
                        addCustomerSave.classList.remove('opacity-60', 'cursor-wait');
                    }
                }

                async function loadPickerCustomers(force = false) {
                    // Cache local: por si Firebase tarda o est치 offline
                    const CACHE_KEY = 'sr_manual_customers';

                    const mgr = await waitForManualCustomerManager();
                    if (mgr) {
                        try {
                            const list = await mgr.getCustomers({ limitCount: 500 });
                            pickerCustomers = (Array.isArray(list) ? list : []).map(c => ({
                                id: c.id,
                                name: c.name || '',
                                phone: c.phone || (c.phoneDigits || ''),
                                address: c.address || ''
                            }));
                            try { localStorage.setItem(CACHE_KEY, JSON.stringify(pickerCustomers)); } catch (_) {}
                            renderPicker();
                            return;
                        } catch (e) {
                            console.warn('Picker: no se pudo leer Firebase manual_customers:', e);
                        }
                    }

                    // Fallback a cache local
                    if (!force) {
                        try {
                            const raw = localStorage.getItem(CACHE_KEY);
                            const parsed = raw ? JSON.parse(raw) : [];
                            pickerCustomers = Array.isArray(parsed) ? parsed : [];
                        } catch (_) {
                            pickerCustomers = [];
                        }
                    }
                    renderPicker();
                }

                function renderPicker() {
                    if (!pickerList || !pickerEmpty) return;

                    const q = String((pickerSearch && pickerSearch.value) || '').trim().toLowerCase();
                    const filtered = pickerCustomers.filter(c => {
                        const n = String(c.name || '').toLowerCase();
                        const p = normalizeDigits(c.phone);
                        return !q || n.includes(q) || p.includes(normalizeDigits(q));
                    });

                    pickerList.innerHTML = '';
                    pickerEmpty.classList.toggle('hidden', filtered.length > 0);

                    filtered.forEach(c => {
                        const btn = document.createElement('button');
                        btn.type = 'button';
                        btn.className = 'w-full text-left p-3 rounded-2xl border border-gray-200 hover:border-yellow-400 hover:bg-yellow-50 transition';
                        btn.innerHTML = `
                            <div class="font-bold text-gray-900 truncate">${escapeHtml(c.name || '(Sin nombre)')}</div>
                            <div class="text-xs text-gray-600">${escapeHtml(c.phone || '')}</div>
                            <div class="text-xs text-gray-700 mt-1 whitespace-pre-wrap">${escapeHtml(c.address || '')}</div>
                        `;
                        btn.addEventListener('click', () => {
                            const nameEl = document.getElementById('customer-name');
                            const phoneEl = document.getElementById('customer-phone');
                            const addrEl = document.getElementById('manual-address');
                            if (nameEl) nameEl.value = c.name || '';
                            if (phoneEl) phoneEl.value = c.phone || '';
                            if (addrEl && c.address) addrEl.value = c.address;
                            hidePicker();
                        });
                        pickerList.appendChild(btn);
                    });
                }

                function escapeHtml(s) {
                    return String(s ?? '')
                        .replace(/&/g, '&amp;')
                        .replace(/</g, '&lt;')
                        .replace(/>/g, '&gt;')
                        .replace(/"/g, '&quot;')
                        .replace(/'/g, '&#039;');
                }

                if (pickerSearch) pickerSearch.addEventListener('input', renderPicker);

                if (addCustomerClose) addCustomerClose.addEventListener('click', hideAddCustomerModal);
                if (addCustomerCancel) addCustomerCancel.addEventListener('click', hideAddCustomerModal);
                if (addCustomerSave) addCustomerSave.addEventListener('click', () => { saveAddCustomerFromModal(); });
                
                const deliveryCostInput = document.getElementById('manual-delivery-cost');
                
                // Variable para almacenar el descuento aplicado (cantidad fija)
                let manualDiscountAmount = 0;
                let manualDiscountReason = '';
                
                // Listener para el bot칩n de aplicar descuento
                const applyDiscountBtn = document.getElementById('apply-discount-btn');
                const discountInput = document.getElementById('manual-discount-input');
                const discountReasonInput = document.getElementById('manual-discount-reason');
                const discountError = document.getElementById('manual-discount-error');

                function readManualDiscountState() {
                    const raw = discountInput ? parseFloat(discountInput.value) : 0;
                    const value = isFinite(raw) ? raw : 0;
                    const reason = discountReasonInput ? String(discountReasonInput.value || '').trim() : '';
                    return { value, reason };
                }

                function syncDiscountStateFromInputs() {
                    const { value, reason } = readManualDiscountState();
                    if (value < 0) {
                        if (discountError) {
                            discountError.textContent = 'El descuento no puede ser negativo';
                            discountError.classList.remove('hidden');
                        }
                        return false;
                    }
                    if (discountError) discountError.classList.add('hidden');
                    manualDiscountAmount = value;
                    manualDiscountReason = reason;
                    return true;
                }
                
                if (applyDiscountBtn && discountInput) {
                    applyDiscountBtn.addEventListener('click', function() {
                        if (!syncDiscountStateFromInputs()) return;
                        
                        // Actualizar totales con el descuento
                        const deliveryCost = deliveryCostInput ? (parseFloat(deliveryCostInput.value) || 0) : 0;
                        updateManualCheckoutTotals(deliveryCost);

                        const { value } = readManualDiscountState();
                        console.log(`九 Descuento aplicado: $${(Number(value) || 0).toFixed(2)}`);
                    });
                }

                // Recalcular al escribir (no depender del bot칩n Aplicar)
                if (discountInput) {
                    discountInput.addEventListener('input', function() {
                        if (!syncDiscountStateFromInputs()) return;
                        const deliveryCost = deliveryCostInput ? (parseFloat(deliveryCostInput.value) || 0) : 0;
                        updateManualCheckoutTotals(deliveryCost);
                    });
                }
                if (discountReasonInput) {
                    discountReasonInput.addEventListener('input', function() {
                        syncDiscountStateFromInputs();
                    });
                }
                
                // Listener para actualizar totales cuando cambia el costo de env칤o
                if (deliveryCostInput) {
                    deliveryCostInput.addEventListener('input', function() {
                        const deliveryCost = parseFloat(this.value) || 0;
                        updateManualCheckoutTotals(deliveryCost);
                    });
                }
                
                // Listener para mostrar/ocultar secci칩n de direcci칩n manual
                const deliveryRadios = document.querySelectorAll('input[name="delivery-type"]');
                deliveryRadios.forEach(radio => {
                    radio.addEventListener('change', function() {
                        const locationSection = document.getElementById('location-section');
                        const deliveryOptionFee = document.getElementById('delivery-option-fee');
                        
                        if (this.value === 'delivery') {
                            if (locationSection) locationSection.classList.remove('hidden');
                            if (deliveryOptionFee) deliveryOptionFee.textContent = 'Ingresa manualmente';
                        } else {
                            if (locationSection) locationSection.classList.add('hidden');
                            if (deliveryOptionFee) deliveryOptionFee.textContent = 'Calculando';
                            // Resetear costo de env칤o si cambia a pickup
                            if (deliveryCostInput) {
                                deliveryCostInput.value = '0';
                                updateManualCheckoutTotals(0);
                            }
                        }
                    });
                });
                
                // Funci칩n para actualizar los totales del checkout
                function updateManualCheckoutTotals(deliveryCost) {
                    const subtotalEl = document.getElementById('checkout-subtotal');
                    const discountRowEl = document.getElementById('checkout-discount-row');
                    const discountEl = document.getElementById('checkout-discount');
                    const deliveryFeeEl = document.getElementById('checkout-delivery-fee');
                    const totalEl = document.getElementById('checkout-total');
                    const stickyDeliveryEl = document.getElementById('checkout-sticky-delivery');
                    const stickyTotalEl = document.getElementById('checkout-sticky-total');
                    
                    if (!subtotalEl) return;
                    
                    const subtotal = parseFloat(subtotalEl.textContent.replace('$', '').replace(',', '')) || 0;
                    
                    // Aplicar descuento (cantidad fija)
                    const discountAmount = Math.min(manualDiscountAmount, subtotal); // No puede ser mayor al subtotal
                    const subtotalAfterDiscount = subtotal - discountAmount;
                    
                    // Mostrar/ocultar fila de descuento
                    if (manualDiscountAmount > 0) {
                        if (discountRowEl) discountRowEl.classList.remove('hidden');
                        if (discountEl) discountEl.textContent = '-$' + discountAmount.toFixed(2);
                    } else {
                        if (discountRowEl) discountRowEl.classList.add('hidden');
                    }
                    
                    // Calcular total
                    const total = subtotalAfterDiscount + deliveryCost;
                    
                    // Mostrar/ocultar fila de env칤o
                    if (deliveryCost > 0) {
                        if (deliveryFeeEl) {
                            deliveryFeeEl.classList.remove('hidden');
                            const feeSpan = deliveryFeeEl.querySelector('span');
                            if (feeSpan) feeSpan.textContent = '+$' + deliveryCost.toFixed(2);
                        }
                        if (stickyDeliveryEl) stickyDeliveryEl.textContent = '$' + deliveryCost.toFixed(2);
                    } else {
                        if (deliveryFeeEl) deliveryFeeEl.classList.add('hidden');
                        if (stickyDeliveryEl) stickyDeliveryEl.textContent = 'Gratis';
                    }
                    
                    // Actualizar total
                    if (totalEl) totalEl.textContent = '$' + total.toFixed(2);
                    if (stickyTotalEl) stickyTotalEl.textContent = '$' + total.toFixed(2);
                }
                
                // Implementaci칩n real del guardado del pedido manual (la llama el stub de `window.placeOrder`).
                function readUnifiedCartForManual() {
                    // El sistema principal (script.js / script.js.backup) usa localStorage['cart'].
                    // Algunas versiones viejas usaban 'sr_burger_cart'. Aqu칤 hacemos fallback + migraci칩n.
                    const tryRead = (key) => {
                        try {
                            const raw = localStorage.getItem(key);
                            if (!raw) return null;
                            const parsed = JSON.parse(raw);
                            return Array.isArray(parsed) ? parsed : null;
                        } catch (_) {
                            return null;
                        }
                    };

                    const primary = tryRead('cart');
                    if (primary && primary.length) return primary;

                    const legacy = tryRead('sr_burger_cart');
                    if (legacy && legacy.length) {
                        try { localStorage.setItem('cart', JSON.stringify(legacy)); } catch (_) {}
                        return legacy;
                    }

                    // 칔ltimo recurso: si existe un array global (por otras integraciones)
                    try {
                        if (Array.isArray(window.cart) && window.cart.length) return window.cart;
                    } catch (_) {}

                    return primary || legacy || [];
                }

                window.__manualPlaceOrderImpl = async function() {
                    console.log('游닇 Validaci칩n manual de pedido');
                    
                    // Obtener valores
                    const name = document.getElementById('customer-name').value.trim();
                    const phone = document.getElementById('customer-phone').value.trim();
                    const deliveryType = document.querySelector('input[name="delivery-type"]:checked')?.value || 'pickup';
                    const payment = document.querySelector('input[name="payment"]:checked')?.value || 'Efectivo';
                    
                    let hasErrors = false;
                    
                    // Validar nombre
                    const nameError = document.getElementById('customer-name-error');
                    if (!name) {
                        if (nameError) {
                            nameError.textContent = 'El nombre es obligatorio';
                            nameError.classList.remove('hidden');
                        }
                        hasErrors = true;
                    } else {
                        if (nameError) nameError.classList.add('hidden');
                    }
                    
                    // Validar tel칠fono
                    const phoneError = document.getElementById('customer-phone-error');
                    if (!phone) {
                        if (phoneError) {
                            phoneError.textContent = 'El tel칠fono es obligatorio';
                            phoneError.classList.remove('hidden');
                        }
                        hasErrors = true;
                    } else {
                        if (phoneError) phoneError.classList.add('hidden');
                    }
                    
                    let address = '';
                    let deliveryCost = 0;
                    
                    // Si es delivery, validar direcci칩n y costo
                    if (deliveryType === 'delivery') {
                        address = document.getElementById('manual-address')?.value.trim() || '';
                        deliveryCost = parseFloat(document.getElementById('manual-delivery-cost')?.value || 0) || 0;
                        
                        const addressError = document.getElementById('manual-address-error');
                        if (!address) {
                            if (addressError) {
                                addressError.textContent = 'La direcci칩n es obligatoria para env칤o a domicilio';
                                addressError.classList.remove('hidden');
                            }
                            hasErrors = true;
                        } else {
                            if (addressError) addressError.classList.add('hidden');
                        }
                        
                        const costError = document.getElementById('manual-delivery-cost-error');
                        if (deliveryCost < 0) {
                            if (costError) {
                                costError.textContent = 'Ingresa un costo v치lido';
                                costError.classList.remove('hidden');
                            }
                            hasErrors = true;
                        } else {
                            if (costError) costError.classList.add('hidden');
                        }
                    }
                    
                    if (hasErrors) {
                        alert('Por favor completa todos los campos obligatorios');
                        return;
                    }
                    
                    const cart = readUnifiedCartForManual();
                    if (cart.length === 0) {
                        alert('El carrito est치 vac칤o');
                        return;
                    }

                    // Tomar descuento desde el input para asegurar que se guarde aunque no se haya presionado "Aplicar".
                    const { value: discountValueRaw, reason: discountReasonRaw } = readManualDiscountState();
                    const discountValue = (isFinite(discountValueRaw) && discountValueRaw > 0) ? discountValueRaw : 0;
                    manualDiscountAmount = discountValue;
                    manualDiscountReason = discountReasonRaw;
                    let subtotal = 0;
                    cart.forEach((item, index) => {
                        const itemTotal = item.price * item.quantity;
                        subtotal += itemTotal;
                    });
                    
                    // Aplicar descuento (cantidad fija)
                    const discountAmount = Math.min(discountValue, subtotal);
                    const subtotalAfterDiscount = subtotal - discountAmount;
                    const total = subtotalAfterDiscount + deliveryCost;
                    const discountReason = String(discountReasonRaw || '').trim();
                    
                    // Guardar el pedido en Firebase (para que aparezca en Control de Env칤os y en el ticket)
                    let createdOrderNumber = null;
                    try {
                        const orderItems = cart.map((ci) => {
                            const qty = Number(ci.quantity || 1) || 1;
                            const unit = Number(ci.price || 0);
                            const base = ci.baseItem || {};
                            const baseId = Number(base.id || base.productId || 0) || 0;
                            const name = String(base.name || ci.name || 'Producto').trim();

                            const parts = [];
                            if (Array.isArray(ci.customizations) && ci.customizations.length) {
                                ci.customizations.forEach(c => {
                                    const n = String(c && c.name ? c.name : '').trim();
                                    if (n) parts.push(n);
                                });
                            }
                            if (Array.isArray(ci.extras) && ci.extras.length) {
                                ci.extras.forEach(e => {
                                    const n = String(e || '').trim();
                                    if (n) parts.push(n);
                                });
                            }
                            if (ci.fries && ci.fries.type) parts.push(`Papas: ${ci.fries.type}`);
                            if (ci.onionRings) parts.push('Aros de Cebolla');
                            if (Array.isArray(ci.menuExtras) && ci.menuExtras.length) {
                                ci.menuExtras.forEach(ex => {
                                    const q = Number(ex.quantity || 1) || 1;
                                    const n = String(ex.name || '').trim();
                                    if (n) parts.push(`${q}x ${n}`);
                                });
                            }

                            return {
                                id: baseId,
                                productId: baseId,
                                name,
                                quantity: qty,
                                unitPrice: isFinite(unit) ? Number(unit.toFixed(2)) : 0,
                                price: isFinite(unit) ? Number((unit * qty).toFixed(2)) : 0,
                                customizations: parts.join(', ')
                            };
                        });

                        const orderData = {
                            customer: { name, phone, address: (deliveryType === 'delivery' ? address : 'Recoger en local - SR & SRA BURGER'), coordinates: null },
                            items: orderItems,
                            subtotal: Number(subtotal.toFixed(2)),
                            subtotalAfterDiscount: Number(subtotalAfterDiscount.toFixed(2)),
                            deliveryFee: Number(deliveryCost.toFixed(2)),
                            total: Number(total.toFixed(2)),
                            notes: manualDiscountAmount > 0 ? `Descuento manual: -$${discountAmount.toFixed(2)}${discountReason ? ` (${discountReason})` : ''}` : '',
                            deliveryType: deliveryType,
                            paymentMethod: payment,
                            discountAmount: Number(discountAmount.toFixed(2)),
                            discountReason: discountReason
                        };

                        if (window.firebaseOrderManager && typeof window.firebaseOrderManager.addOrder === 'function') {
                            const res = await window.firebaseOrderManager.addOrder(orderData);
                            createdOrderNumber = res && res.orderNumber ? res.orderNumber : null;
                            console.log('九 Pedido manual guardado. No. Orden:', createdOrderNumber);
                        }
                    } catch (e) {
                        console.warn('丘멆잺 No se pudo guardar el pedido manual en Firebase:', e);
                    }

                    // Pedido manual: no enviar WhatsApp autom치ticamente.
                    const orderLabel = createdOrderNumber ? `\n\nN칰mero de orden: ${createdOrderNumber}` : '';
                    alert(`九 Pedido guardado correctamente.${orderLabel}`);
                    
                    // Preguntar si desea vaciar el carrito
                    setTimeout(() => {
                        if (confirm('쮻eseas vaciar el carrito despu칠s de guardar el pedido?')) {
                            try { localStorage.removeItem('cart'); } catch (_) {}
                            try { localStorage.removeItem('sr_burger_cart'); } catch (_) {}
                            location.reload();
                        }
                    }, 500);
                };
                
                console.log('九 Implementaci칩n de placeOrder manual lista');
            }, 1000);
        </script>

</body>
</html>